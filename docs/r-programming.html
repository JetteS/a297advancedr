<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 R programming | A297 Advanced R</title>
  <meta name="description" content="This document contains all the materials used in connection to the PhD course A297 Advanced R held at the Graduate School of Health, Aarhus University, Denmark. The materials in this document are modifications of the materials presented in advr28book by Florian Privé." />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 R programming | A297 Advanced R" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://JetteS.github.io/a297advancedr//images/new_hexsticker.png" />
  <meta property="og:description" content="This document contains all the materials used in connection to the PhD course A297 Advanced R held at the Graduate School of Health, Aarhus University, Denmark. The materials in this document are modifications of the materials presented in advr28book by Florian Privé." />
  <meta name="github-repo" content="JetteS/a297advancedr" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 R programming | A297 Advanced R" />
  
  <meta name="twitter:description" content="This document contains all the materials used in connection to the PhD course A297 Advanced R held at the Graduate School of Health, Aarhus University, Denmark. The materials in this document are modifications of the materials presented in advr28book by Florian Privé." />
  <meta name="twitter:image" content="https://JetteS.github.io/a297advancedr//images/new_hexsticker.png" />

<meta name="author" content="Jette Steinbach" />


<meta name="date" content="2024-08-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="good-practices.html"/>
<link rel="next" href="rmarkdown.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-100463316-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-100463316-5');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">A297 Advanced R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-read-this-book"><i class="fa fa-check"></i>How to read this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#content"><i class="fa fa-check"></i>Content</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#useful-resources"><i class="fa fa-check"></i>Useful resources</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="good-practices.html"><a href="good-practices.html"><i class="fa fa-check"></i><b>2</b> Good practices</a>
<ul>
<li class="chapter" data-level="2.1" data-path="good-practices.html"><a href="good-practices.html#coding-style"><i class="fa fa-check"></i><b>2.1</b> Coding style</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="good-practices.html"><a href="good-practices.html#naming"><i class="fa fa-check"></i><b>2.1.1</b> Naming</a></li>
<li class="chapter" data-level="2.1.2" data-path="good-practices.html"><a href="good-practices.html#spacing"><i class="fa fa-check"></i><b>2.1.2</b> Spacing</a></li>
<li class="chapter" data-level="2.1.3" data-path="good-practices.html"><a href="good-practices.html#indenting"><i class="fa fa-check"></i><b>2.1.3</b> Indenting</a></li>
<li class="chapter" data-level="2.1.4" data-path="good-practices.html"><a href="good-practices.html#long-lines"><i class="fa fa-check"></i><b>2.1.4</b> Long lines</a></li>
<li class="chapter" data-level="2.1.5" data-path="good-practices.html"><a href="good-practices.html#other"><i class="fa fa-check"></i><b>2.1.5</b> Other</a></li>
<li class="chapter" data-level="2.1.6" data-path="good-practices.html"><a href="good-practices.html#code-organization"><i class="fa fa-check"></i><b>2.1.6</b> Code organization</a></li>
<li class="chapter" data-level="2.1.7" data-path="good-practices.html"><a href="good-practices.html#styler"><i class="fa fa-check"></i><b>2.1.7</b> Styler</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="good-practices.html"><a href="good-practices.html#rstudio"><i class="fa fa-check"></i><b>2.2</b> RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="good-practices.html"><a href="good-practices.html#git"><i class="fa fa-check"></i><b>2.3</b> Version control (Git)</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="good-practices.html"><a href="good-practices.html#why-use-git"><i class="fa fa-check"></i><b>2.3.1</b> Why use Git?</a></li>
<li class="chapter" data-level="2.3.2" data-path="good-practices.html"><a href="good-practices.html#how-to-use-git"><i class="fa fa-check"></i><b>2.3.2</b> How to use Git</a></li>
<li class="chapter" data-level="" data-path="good-practices.html"><a href="good-practices.html#exercise"><i class="fa fa-check"></i>Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="good-practices.html"><a href="good-practices.html#when-things-go-wrong"><i class="fa fa-check"></i><b>2.4</b> When things go wrong…</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="good-practices.html"><a href="good-practices.html#first-locate-the-error"><i class="fa fa-check"></i><b>2.4.1</b> First: locate the error</a></li>
<li class="chapter" data-level="2.4.2" data-path="good-practices.html"><a href="good-practices.html#second-fix-the-error"><i class="fa fa-check"></i><b>2.4.2</b> Second: fix the error</a></li>
<li class="chapter" data-level="2.4.3" data-path="good-practices.html"><a href="good-practices.html#external-help"><i class="fa fa-check"></i><b>2.4.3</b> External help</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="good-practices.html"><a href="good-practices.html#summary"><i class="fa fa-check"></i><b>2.5</b> Summary</a></li>
<li class="chapter" data-level="" data-path="good-practices.html"><a href="good-practices.html#useful-resources-1"><i class="fa fa-check"></i>Useful resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-programming.html"><a href="r-programming.html"><i class="fa fa-check"></i><b>3</b> R programming</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-programming.html"><a href="r-programming.html#common-mistakes-to-avoid"><i class="fa fa-check"></i><b>3.1</b> Common mistakes to avoid</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="r-programming.html"><a href="r-programming.html#the-floating-point-error"><i class="fa fa-check"></i><b>3.1.1</b> The floating-point error</a></li>
<li class="chapter" data-level="3.1.2" data-path="r-programming.html"><a href="r-programming.html#the-...-argument"><i class="fa fa-check"></i><b>3.1.2</b> The <code>...</code> argument</a></li>
<li class="chapter" data-level="3.1.3" data-path="r-programming.html"><a href="r-programming.html#others"><i class="fa fa-check"></i><b>3.1.3</b> Others</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="r-programming.html"><a href="r-programming.html#useful-r-functions"><i class="fa fa-check"></i><b>3.2</b> Useful <code>R</code> functions</a>
<ul>
<li class="chapter" data-level="" data-path="r-programming.html"><a href="r-programming.html#general"><i class="fa fa-check"></i>General</a></li>
<li class="chapter" data-level="" data-path="r-programming.html"><a href="r-programming.html#sequence-and-vector-operations"><i class="fa fa-check"></i>Sequence and vector operations</a></li>
<li class="chapter" data-level="" data-path="r-programming.html"><a href="r-programming.html#character-operations"><i class="fa fa-check"></i>Character operations</a></li>
<li class="chapter" data-level="" data-path="r-programming.html"><a href="r-programming.html#logical-operators"><i class="fa fa-check"></i>Logical operators</a></li>
<li class="chapter" data-level="" data-path="r-programming.html"><a href="r-programming.html#useful-non-base-r-functions"><i class="fa fa-check"></i>Useful non-base R functions</a></li>
<li class="chapter" data-level="" data-path="r-programming.html"><a href="r-programming.html#exercises"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="r-programming.html"><a href="r-programming.html#data-structures-in-r"><i class="fa fa-check"></i><b>3.3</b> Data structures in <code>R</code></a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="r-programming.html"><a href="r-programming.html#types"><i class="fa fa-check"></i><b>3.3.1</b> Types</a></li>
<li class="chapter" data-level="3.3.2" data-path="r-programming.html"><a href="r-programming.html#objects-and-attributes"><i class="fa fa-check"></i><b>3.3.2</b> Objects and attributes</a></li>
<li class="chapter" data-level="3.3.3" data-path="r-programming.html"><a href="r-programming.html#accessors"><i class="fa fa-check"></i><b>3.3.3</b> Accessors</a></li>
<li class="chapter" data-level="" data-path="r-programming.html"><a href="r-programming.html#exercises-2"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="r-programming.html"><a href="r-programming.html#environments-and-scoping"><i class="fa fa-check"></i><b>3.4</b> Environments and scoping</a></li>
<li class="chapter" data-level="3.5" data-path="r-programming.html"><a href="r-programming.html#summary-1"><i class="fa fa-check"></i><b>3.5</b> Summary</a></li>
<li class="chapter" data-level="" data-path="r-programming.html"><a href="r-programming.html#useful-resources-2"><i class="fa fa-check"></i>Useful resources</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>4</b> R Markdown</a>
<ul>
<li class="chapter" data-level="4.1" data-path="rmarkdown.html"><a href="rmarkdown.html#r-markdown-basics"><i class="fa fa-check"></i><b>4.1</b> R Markdown basics</a>
<ul>
<li class="chapter" data-level="" data-path="rmarkdown.html"><a href="rmarkdown.html#the-yaml-header"><i class="fa fa-check"></i>The YAML header</a></li>
<li class="chapter" data-level="" data-path="rmarkdown.html"><a href="rmarkdown.html#r-code-chunks"><i class="fa fa-check"></i><code>R</code> code chunks</a></li>
<li class="chapter" data-level="" data-path="rmarkdown.html"><a href="rmarkdown.html#plain-text-with-simple-text-formatting"><i class="fa fa-check"></i>Plain text with simple text formatting</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="rmarkdown.html"><a href="rmarkdown.html#producing-a-complete-report"><i class="fa fa-check"></i><b>4.2</b> Producing a complete report</a>
<ul>
<li class="chapter" data-level="" data-path="rmarkdown.html"><a href="rmarkdown.html#exercise-2"><i class="fa fa-check"></i>Exercise</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="rmarkdown.html"><a href="rmarkdown.html#summary-2"><i class="fa fa-check"></i><b>4.3</b> Summary</a></li>
<li class="chapter" data-level="" data-path="rmarkdown.html"><a href="rmarkdown.html#useful-resources-3"><i class="fa fa-check"></i>Useful resources</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>5</b> Data analysis with the tidyverse</a>
<ul>
<li class="chapter" data-level="5.1" data-path="tidyverse.html"><a href="tidyverse.html#program"><i class="fa fa-check"></i><b>5.1</b> Program</a></li>
<li class="chapter" data-level="5.2" data-path="tidyverse.html"><a href="tidyverse.html#other-chapters-from-this-book"><i class="fa fa-check"></i><b>5.2</b> Other chapters from this book</a></li>
<li class="chapter" data-level="5.3" data-path="tidyverse.html"><a href="tidyverse.html#other-resources"><i class="fa fa-check"></i><b>5.3</b> Other resources</a></li>
<li class="chapter" data-level="5.4" data-path="tidyverse.html"><a href="tidyverse.html#other-tidy-packages"><i class="fa fa-check"></i><b>5.4</b> Other “tidy” packages</a></li>
<li class="chapter" data-level="5.5" data-path="tidyverse.html"><a href="tidyverse.html#summary-3"><i class="fa fa-check"></i><b>5.5</b> Summary</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#useful-resources-4"><i class="fa fa-check"></i>Useful resources</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="performance.html"><a href="performance.html"><i class="fa fa-check"></i><b>6</b> Performance</a>
<ul>
<li class="chapter" data-level="6.1" data-path="performance.html"><a href="performance.html#rs-memory-management"><i class="fa fa-check"></i><b>6.1</b> R’s memory management</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="performance.html"><a href="performance.html#understanding-binding-basics"><i class="fa fa-check"></i><b>6.1.1</b> Understanding binding basics</a></li>
<li class="chapter" data-level="6.1.2" data-path="performance.html"><a href="performance.html#copy-on-modify"><i class="fa fa-check"></i><b>6.1.2</b> Copy-on-modify</a></li>
<li class="chapter" data-level="6.1.3" data-path="performance.html"><a href="performance.html#copy-on-modify-what-about-inside-functions"><i class="fa fa-check"></i><b>6.1.3</b> Copy-on-modify: what about inside functions?</a></li>
<li class="chapter" data-level="6.1.4" data-path="performance.html"><a href="performance.html#lists"><i class="fa fa-check"></i><b>6.1.4</b> Lists</a></li>
<li class="chapter" data-level="6.1.5" data-path="performance.html"><a href="performance.html#copy-on-modify-for-lists"><i class="fa fa-check"></i><b>6.1.5</b> Copy-on-modify for lists?</a></li>
<li class="chapter" data-level="6.1.6" data-path="performance.html"><a href="performance.html#data-frames"><i class="fa fa-check"></i><b>6.1.6</b> Data frames</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="performance.html"><a href="performance.html#early-advice"><i class="fa fa-check"></i><b>6.2</b> Early advice</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="performance.html"><a href="performance.html#never-grow-a-vector"><i class="fa fa-check"></i><b>6.2.1</b> NEVER GROW A VECTOR</a></li>
<li class="chapter" data-level="6.2.2" data-path="performance.html"><a href="performance.html#use-the-right-function"><i class="fa fa-check"></i><b>6.2.2</b> Use the right function</a></li>
<li class="chapter" data-level="6.2.3" data-path="performance.html"><a href="performance.html#do-not-try-to-optimize-everything"><i class="fa fa-check"></i><b>6.2.3</b> Do not try to optimize everything</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="performance.html"><a href="performance.html#vectorization"><i class="fa fa-check"></i><b>6.3</b> Vectorization</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="performance.html"><a href="performance.html#exercise-3"><i class="fa fa-check"></i><b>6.3.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="performance.html"><a href="performance.html#Rcpp"><i class="fa fa-check"></i><b>6.4</b> Rcpp</a></li>
<li class="chapter" data-level="6.5" data-path="performance.html"><a href="performance.html#linear-algebra"><i class="fa fa-check"></i><b>6.5</b> Linear algebra</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="performance.html"><a href="performance.html#exercises-3"><i class="fa fa-check"></i><b>6.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="performance.html"><a href="performance.html#algorithms-data-structures"><i class="fa fa-check"></i><b>6.6</b> Algorithms &amp; data structures</a></li>
<li class="chapter" data-level="6.7" data-path="performance.html"><a href="performance.html#exos"><i class="fa fa-check"></i><b>6.7</b> Exercises</a></li>
<li class="chapter" data-level="6.8" data-path="performance.html"><a href="performance.html#parallel-computing"><i class="fa fa-check"></i><b>6.8</b> Parallel computing</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>7</b> Packages</a>
<ul>
<li class="chapter" data-level="7.1" data-path="packages.html"><a href="packages.html#resources"><i class="fa fa-check"></i><b>7.1</b> Resources</a></li>
<li class="chapter" data-level="7.2" data-path="packages.html"><a href="packages.html#project-exercise"><i class="fa fa-check"></i><b>7.2</b> Project exercise</a></li>
<li class="chapter" data-level="7.3" data-path="packages.html"><a href="packages.html#pkg-start"><i class="fa fa-check"></i><b>7.3</b> Quick start</a></li>
<li class="chapter" data-level="7.4" data-path="packages.html"><a href="packages.html#pkg-basics"><i class="fa fa-check"></i><b>7.4</b> Basic stuff</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="packages.html"><a href="packages.html#description-file"><i class="fa fa-check"></i><b>7.4.1</b> <em>DESCRIPTION</em> file</a></li>
<li class="chapter" data-level="7.4.2" data-path="packages.html"><a href="packages.html#r-code"><i class="fa fa-check"></i><b>7.4.2</b> R code</a></li>
<li class="chapter" data-level="7.4.3" data-path="packages.html"><a href="packages.html#documentation"><i class="fa fa-check"></i><b>7.4.3</b> Documentation</a></li>
<li class="chapter" data-level="7.4.4" data-path="packages.html"><a href="packages.html#namespace-file"><i class="fa fa-check"></i><b>7.4.4</b> <em>NAMESPACE</em> file</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="packages.html"><a href="packages.html#good-practices-1"><i class="fa fa-check"></i><b>7.5</b> Good practices</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="packages.html"><a href="packages.html#pkg-tests"><i class="fa fa-check"></i><b>7.5.1</b> Testing</a></li>
<li class="chapter" data-level="7.5.2" data-path="packages.html"><a href="packages.html#pkg-ci"><i class="fa fa-check"></i><b>7.5.2</b> Continuous checking</a></li>
<li class="chapter" data-level="7.5.3" data-path="packages.html"><a href="packages.html#pkgdown"><i class="fa fa-check"></i><b>7.5.3</b> Pkgdown</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="packages.html"><a href="packages.html#more"><i class="fa fa-check"></i><b>7.6</b> More</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="packages.html"><a href="packages.html#rcpp"><i class="fa fa-check"></i><b>7.6.1</b> Rcpp</a></li>
<li class="chapter" data-level="7.6.2" data-path="packages.html"><a href="packages.html#ignore-files"><i class="fa fa-check"></i><b>7.6.2</b> Ignore files</a></li>
<li class="chapter" data-level="7.6.3" data-path="packages.html"><a href="packages.html#the-inst-directory"><i class="fa fa-check"></i><b>7.6.3</b> The <code>inst/</code> directory</a></li>
<li class="chapter" data-level="7.6.4" data-path="packages.html"><a href="packages.html#pkg-data"><i class="fa fa-check"></i><b>7.6.4</b> External data</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="packages.html"><a href="packages.html#release-on-cran"><i class="fa fa-check"></i><b>7.7</b> Release on CRAN</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="project.html"><a href="project.html"><i class="fa fa-check"></i><b>8</b> Project</a>
<ul>
<li class="chapter" data-level="8.1" data-path="project.html"><a href="project.html#what-is-tidy-tuesday"><i class="fa fa-check"></i><b>8.1</b> What is Tidy Tuesday?</a></li>
<li class="chapter" data-level="8.2" data-path="project.html"><a href="project.html#tidy-thursday"><i class="fa fa-check"></i><b>8.2</b> Tidy Thursday</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="project.html"><a href="project.html#choose-a-dataset"><i class="fa fa-check"></i><b>8.2.1</b> Choose a dataset</a></li>
<li class="chapter" data-level="8.2.2" data-path="project.html"><a href="project.html#visualize-the-data"><i class="fa fa-check"></i><b>8.2.2</b> Visualize the data</a></li>
<li class="chapter" data-level="8.2.3" data-path="project.html"><a href="project.html#compilation-of-tweets"><i class="fa fa-check"></i><b>8.2.3</b> Compilation of tweets</a></li>
<li class="chapter" data-level="8.2.4" data-path="project.html"><a href="project.html#example"><i class="fa fa-check"></i><b>8.2.4</b> Example</a></li>
<li class="chapter" data-level="8.2.5" data-path="project.html"><a href="project.html#presentation"><i class="fa fa-check"></i><b>8.2.5</b> Presentation</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A297 Advanced R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-programming" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> R programming<a href="r-programming.html#r-programming" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In the following, we will consider base <code>R</code> concepts that are important but often overlooked by or unknown to <code>R</code> users. We hope that this chapter will help you to better understand <code>R</code> as a programming language, to avoid common mistakes, and to write more efficient code.</p>
<p>Some of the examples used in this chapter are taken from <a href="http://www.burns-stat.com/pages/Tutor/R_inferno.pdf">The R Inferno</a> by Patrick Burns, who described his materials in the following way:</p>
<blockquote>
<p>If you are using R and you think you’re in hell, this is a map for you.</p>
<footer>
— Patrick Burns
</footer>
</blockquote>
<div id="common-mistakes-to-avoid" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Common mistakes to avoid<a href="r-programming.html#common-mistakes-to-avoid" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the first part of this chapter, we will look at some common mistakes and how to avoid them.</p>
<div id="the-floating-point-error" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> The floating-point error<a href="r-programming.html#the-floating-point-error" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In <code>R</code>, a real number is represented as a floating-point number. A floating-point number is a positive or negative whole number scaled by an integer exponent of a fixed base.</p>
<p><img src="https://i.giphy.com/media/v1.Y2lkPTc5MGI3NjExa2VidmNuNm16aHI5MjRmZGJ4Ym9xamJzcGhkNzdvdHE1NzhyNGQ4dSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/ghuvaCOI6GOoTX0RmH/giphy.gif" /></p>
<p>It is actually not that complicated. For example, 12.568 is a floating-point number in base ten with five digits of precision:
<span class="math display">\[
12.568 = \underbrace{12568}_\text{whole number} \times {\underbrace{10}_\text{base}}^{\overbrace{-3}^\text{integer exponent}}
\]</span>
Base ten is the most convenient base to understand how floating-point numbers are represented. But you can use any base. For example, in base five, 12.568 is represented by
<span class="math display">\[
12.568 = \underbrace{22241}_\text{whole number} \times {\underbrace{5}_\text{base}}^{\overbrace{-3}^\text{integer exponent}},
\]</span>
i.e. a floating-point number with five digits of precision. You can validate that this is indeed the right representation<br />
<span class="math display">\[
\begin{align*}
22241 \times 5^{-3} &amp;= (2 \times 5^{4} + 2 \times 5^{3} + 2 \times 5^{2} + 4 \times 5^{1} + 1 \times 5^{0}) \times 5^{-3}\\
&amp;= 2 \times 5^{1} + 2 \times 5^{0} + 2 \times 5^{-1} + 4 \times 5^{-2} + 1 \times 5^{-3}\\
&amp;= 10 + 2 + 0,4 + 0,16 + 0.008\\
&amp;= 12.568.
\end{align*}
\]</span>
In base two, the representation is more complex:
<span class="math display">\[
12.568 = \underbrace{1100 1001 0001 0110 1000 0111 0010 1011 0000 0010 0000 1100 0100 1001 1011 1010 011}_\text{whole number} \times {\underbrace{2}_\text{base}}^{\overbrace{-60}^\text{integer exponent}},
\]</span>
but it still has the same form; a positive whole number with 64 digits of precision times the base to the power -60.</p>
<p>Not all real numbers can be represented by a floating-point number with a predefined precision. The base and the number of digits regulate how precisely a floating point number can be represented. For example, you cannot represent 12.568 as a floating-point number with four digits of precision in base ten, five or two. The nearest whole number of 12586 with only four digits of precision is 1257. Hence, the closest we can get to 12.568 using only four digits of precision in base ten is 12.57. Not too bad.
The nearest whole number of 22241 with only four digits of precision is 2224. Therefore, the closest we can get to 12.568 using only four digits of precision in base five is 12.56. A bit worse than in base ten.
However, the nearest whole number of 1100100100010110100001110010101100000010000011000100100110111010011 with only four digits of precision in base 2 is 1100. This means that the closest we can get to 12.568 using only four digits of precision in base five is 12. A difference of 0.568 may not be problematic in some cases, but it can be catastrophic in others.</p>
<p><code>R</code> uses base 2 with (usually) 53 digits of precision. Hence, all floating-point numbers with more than 53 digits of precision will be represented by the nearest floating-point number with 53 digits of precision.
For example, take the real number 0.3. In base two, 0.3 is represented by 0.0100110011001100110011001100… (a number with infinitely many digits of precision). The nearest floating-point number with only 53 digits of precision is 0.299999999999999988897769753748434595763683319091796875, which is the floating-point number <code>R</code> uses to represent 0.3.</p>
<p>The binary representation is not perfect, but it is the best approximation <code>R</code> has.</p>
<p>When you assign the value 0.3 to an object and print the object to the console afterwards, you will see that <code>R</code> returns 0.3:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="r-programming.html#cb20-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fl">0.3</span></span>
<span id="cb20-2"><a href="r-programming.html#cb20-2" tabindex="-1"></a>x</span>
<span id="cb20-3"><a href="r-programming.html#cb20-3" tabindex="-1"></a><span class="co">#&gt; [1] 0.3</span></span></code></pre></div>
<p>So you may think <em>Why did you bother me with all that talk about floating-point numbers? There is clearly no problem here!</em></p>
<p>However, per default, the function <code>print()</code> only prints 7 significant digits when printing numeric values.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="r-programming.html#cb21-1" tabindex="-1"></a><span class="fu">getOption</span>(<span class="st">&quot;digits&quot;</span>)</span>
<span id="cb21-2"><a href="r-programming.html#cb21-2" tabindex="-1"></a><span class="co">#&gt; [1] 7</span></span></code></pre></div>
<p>If you increase that number to 22, you can see that 0.3 is actually represented by 0.2999999999999999888978</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="r-programming.html#cb22-1" tabindex="-1"></a><span class="fu">print</span>(x, <span class="at">digits =</span> <span class="dv">22</span>)</span>
<span id="cb22-2"><a href="r-programming.html#cb22-2" tabindex="-1"></a><span class="co">#&gt; [1] 0.2999999999999999888978</span></span></code></pre></div>
<p>This inaccuracy is known as the <strong>floating-point error</strong>, and it is the reason why simple comparisons like the following can fail:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="r-programming.html#cb23-1" tabindex="-1"></a>(<span class="fl">0.1</span> <span class="sc">+</span> <span class="fl">0.2</span>) <span class="sc">==</span> <span class="fl">0.3</span></span>
<span id="cb23-2"><a href="r-programming.html#cb23-2" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<p>Instead of using <code>==</code> to compare two objects, use the base <code>R</code> function <code>all.equal()</code> to test if two objects are equal up to some tolerance (<span class="math inline">\(1.5\times 10^{-8}\)</span> per default).</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="r-programming.html#cb24-1" tabindex="-1"></a><span class="fu">all.equal</span>(<span class="fl">0.1</span> <span class="sc">+</span> <span class="fl">0.2</span>, <span class="fl">0.3</span>)</span>
<span id="cb24-2"><a href="r-programming.html#cb24-2" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb24-3"><a href="r-programming.html#cb24-3" tabindex="-1"></a><span class="fu">all.equal</span>(<span class="fl">0.1</span> <span class="sc">+</span> <span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="at">tolerance =</span> <span class="dv">0</span>)</span>
<span id="cb24-4"><a href="r-programming.html#cb24-4" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Mean relative difference: 1.850372e-16&quot;</span></span>
<span id="cb24-5"><a href="r-programming.html#cb24-5" tabindex="-1"></a><span class="fu">all.equal</span>(<span class="fl">0.1</span> <span class="sc">+</span> <span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="at">tolerance =</span> <span class="fl">1e-16</span>)</span>
<span id="cb24-6"><a href="r-programming.html#cb24-6" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Mean relative difference: 1.850372e-16&quot;</span></span>
<span id="cb24-7"><a href="r-programming.html#cb24-7" tabindex="-1"></a><span class="fu">all.equal</span>(<span class="fl">0.1</span> <span class="sc">+</span> <span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="at">tolerance =</span> <span class="fl">1e-15</span>)</span>
<span id="cb24-8"><a href="r-programming.html#cb24-8" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>As <code>all.equal()</code> returns either <code>TRUE</code> or a string with the mean relative difference, you cannot use it directly in <code>if</code> expressions. Use <code>isTRUE(all.equal())</code> instead:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="r-programming.html#cb25-1" tabindex="-1"></a><span class="fu">isTRUE</span>(<span class="fu">all.equal</span>(<span class="fl">0.1</span> <span class="sc">+</span> <span class="fl">0.2</span>, <span class="fl">0.4</span>))</span>
<span id="cb25-2"><a href="r-programming.html#cb25-2" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<p>Alternatively, you can use the <code>dplyr</code> function <code>near()</code></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="r-programming.html#cb26-1" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">near</span>(<span class="fl">0.1</span> <span class="sc">+</span> <span class="fl">0.2</span>, <span class="fl">0.3</span>)</span>
<span id="cb26-2"><a href="r-programming.html#cb26-2" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb26-3"><a href="r-programming.html#cb26-3" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">near</span>(<span class="fl">0.1</span> <span class="sc">+</span> <span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="at">tol =</span> <span class="fl">1e-17</span>)</span>
<span id="cb26-4"><a href="r-programming.html#cb26-4" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
</div>
<div id="the-...-argument" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> The <code>...</code> argument<a href="r-programming.html#the-...-argument" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Another source of mistakes often occur in connection to arguments. To illustrate the problem, let us consider a simple example. Assume we have three observations <span class="math inline">\(-1, 5 \text{ and }118\)</span>, and we want to find the minimum, maximum, mean, and median in <code>R</code>. We know that we can use the functions <code>min()</code>, <code>max()</code>, <code>mean()</code>, and <code>median()</code> to obtain the desired numbers, so we run the following code:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="r-programming.html#cb27-1" tabindex="-1"></a><span class="fu">min</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">118</span>)</span>
<span id="cb27-2"><a href="r-programming.html#cb27-2" tabindex="-1"></a><span class="co">#&gt; [1] -1</span></span>
<span id="cb27-3"><a href="r-programming.html#cb27-3" tabindex="-1"></a><span class="fu">max</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">118</span>)</span>
<span id="cb27-4"><a href="r-programming.html#cb27-4" tabindex="-1"></a><span class="co">#&gt; [1] 118</span></span>
<span id="cb27-5"><a href="r-programming.html#cb27-5" tabindex="-1"></a><span class="fu">mean</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">118</span>)</span>
<span id="cb27-6"><a href="r-programming.html#cb27-6" tabindex="-1"></a><span class="co">#&gt; [1] -1</span></span>
<span id="cb27-7"><a href="r-programming.html#cb27-7" tabindex="-1"></a><span class="fu">median</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">118</span>)</span>
<span id="cb27-8"><a href="r-programming.html#cb27-8" tabindex="-1"></a><span class="co">#&gt; [1] -1</span></span></code></pre></div>
<p>The first two numbers are correct, but what is happening with the last two function calls?</p>
<p>The problem is that the four functions take different arguments. Let us take a look at the arguments for <code>max()</code> first:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="r-programming.html#cb28-1" tabindex="-1"></a><span class="fu">args</span>(max)</span>
<span id="cb28-2"><a href="r-programming.html#cb28-2" tabindex="-1"></a><span class="co">#&gt; function (..., na.rm = FALSE) </span></span>
<span id="cb28-3"><a href="r-programming.html#cb28-3" tabindex="-1"></a><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>The first argument is <code>...</code> (dot dot dot). The three dots represent a special argument that allows functions to take any number of arguments - besides all other specified arguments. This means <code>...</code> will take all unnamed arguments passed to the function. In the example above, none of the parameters are specified by name, and <code>max()</code> will use <span class="math inline">\(-1, 5 \text{ and }118\)</span> to compute the maximum value.</p>
<p>This is different in connection to the function <code>mean()</code>:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="r-programming.html#cb29-1" tabindex="-1"></a><span class="fu">args</span>(mean)</span>
<span id="cb29-2"><a href="r-programming.html#cb29-2" tabindex="-1"></a><span class="co">#&gt; function (x, ...) </span></span>
<span id="cb29-3"><a href="r-programming.html#cb29-3" tabindex="-1"></a><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>The first argument is <code>x</code>, which is followed by <code>...</code>. As all parameters are unnamed in the function call <code>mean(-1, 5, 118)</code>, <code>mean()</code> takes the first value <span class="math inline">\(-1\)</span> to compute the mean, and passes all other arguments to another function. Therefore, <code>mean(-1, 5, 118)</code> returns <span class="math inline">\(-1\)</span>.</p>
<p>In this simple example, one solution is to store all observations in a vector and pass the vector to the functions:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="r-programming.html#cb30-1" tabindex="-1"></a><span class="fu">min</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">118</span>))</span>
<span id="cb30-2"><a href="r-programming.html#cb30-2" tabindex="-1"></a><span class="co">#&gt; [1] -1</span></span>
<span id="cb30-3"><a href="r-programming.html#cb30-3" tabindex="-1"></a><span class="fu">max</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">118</span>))</span>
<span id="cb30-4"><a href="r-programming.html#cb30-4" tabindex="-1"></a><span class="co">#&gt; [1] 118</span></span>
<span id="cb30-5"><a href="r-programming.html#cb30-5" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">118</span>))</span>
<span id="cb30-6"><a href="r-programming.html#cb30-6" tabindex="-1"></a><span class="co">#&gt; [1] 40.66667</span></span>
<span id="cb30-7"><a href="r-programming.html#cb30-7" tabindex="-1"></a><span class="fu">median</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">118</span>))</span>
<span id="cb30-8"><a href="r-programming.html#cb30-8" tabindex="-1"></a><span class="co">#&gt; [1] 5</span></span></code></pre></div>
<p>In more complex cases, you have to be more cautious. When a function has <code>...</code> as one of its arguments, misspelled or non-existing arguments will simple be passed on and not raise an error. This increases the change of typos or wrong computations to go unnoticed. Furthermore, the argument <code>...</code> is greedy, which is why you often have to name all arguments that you want to pass to the function.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="r-programming.html#cb31-1" tabindex="-1"></a><span class="fu">max</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">118</span>, <span class="cn">NA</span>))</span>
<span id="cb31-2"><a href="r-programming.html#cb31-2" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span>
<span id="cb31-3"><a href="r-programming.html#cb31-3" tabindex="-1"></a><span class="fu">max</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">118</span>, <span class="cn">NA</span>), <span class="cn">TRUE</span>)</span>
<span id="cb31-4"><a href="r-programming.html#cb31-4" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span>
<span id="cb31-5"><a href="r-programming.html#cb31-5" tabindex="-1"></a><span class="fu">max</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">118</span>, <span class="cn">NA</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb31-6"><a href="r-programming.html#cb31-6" tabindex="-1"></a><span class="co">#&gt; [1] 118</span></span></code></pre></div>
<p>If you want to know what other arguments <code>...</code> represents, you can look in the function documentation. The function <code>plot()</code>, for example, takes the arguments <code>...</code>. When you read the function documentation (by running <code>?plot</code>), you can see that <code>...</code> represents <em>other graphical parameters</em>, and the documentation refers to the documentation for graphical parameters for details.</p>
</div>
<div id="others" class="section level3 hasAnchor" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Others<a href="r-programming.html#others" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>R</code> has many base functions that behave differently than you may expect. One of them is <code>sample()</code>. <code>sample()</code> creates a sample of a specified size from the elements of the first argument <code>x</code> with or without replacement. The most common use of <code>sample()</code> is probably to let <code>x</code> be a vector:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="r-programming.html#cb32-1" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb32-2"><a href="r-programming.html#cb32-2" tabindex="-1"></a><span class="co">#&gt;  [1]  8  6  7  9  1  5 10  2  3  4</span></span></code></pre></div>
<p>But have you ever tried to pass a single number? Or even a real number?</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="r-programming.html#cb33-1" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">10</span>)</span>
<span id="cb33-2"><a href="r-programming.html#cb33-2" tabindex="-1"></a><span class="fu">sample</span>(<span class="fl">10.1</span>)</span></code></pre></div>
What do you think <code>R</code> returns?
<details>
<summary>
Show me!
</summary>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="r-programming.html#cb34-1" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">10</span>)</span>
<span id="cb34-2"><a href="r-programming.html#cb34-2" tabindex="-1"></a><span class="co">#&gt;  [1]  7  9  8  4  1  5 10  3  6  2</span></span>
<span id="cb34-3"><a href="r-programming.html#cb34-3" tabindex="-1"></a><span class="fu">sample</span>(<span class="fl">10.1</span>)</span>
<span id="cb34-4"><a href="r-programming.html#cb34-4" tabindex="-1"></a><span class="co">#&gt;  [1]  1  6 10  3  8  9  7  2  5  4</span></span></code></pre></div>
<p>Did you expect this outcome? In case you are confused, here is the reason why:.</p>
<p>The first argument of <code>sample()</code> is <code>x</code>. <code>x</code> can either be a vector of one or more elements from which to choose, or a positive integer. If <code>x</code> has length one, is numeric and larger than 1, the sampling will take place from the sequence <code>1:x</code>. On the other hand, <code>1:x</code> generates a vector of real numbers; starting with 1 and increasing with 1 until the upper limit <code>x</code> is reached. Hence, when <code>x</code> = 10.1, <code>1:x</code> is equal to the sequence <code>1,2,...,10</code>, and <code>sample(x)</code> is equivalent to <code>sample(1:10)</code>.</p>
</details>
<p><br>
This leads us to the next base <code>R</code> function with an unexpected behavior; the colon operator <code>:</code>. It can be used to generate regular sequences and is equivalent to <code>seq()</code> (if <code>from</code> and <code>to</code> are not factors). Do you know what the output of the following code will be?</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="r-programming.html#cb35-1" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb35-2"><a href="r-programming.html#cb35-2" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span>n <span class="sc">-</span> <span class="dv">1</span></span></code></pre></div>
<details>
<summary>
Show me!
</summary>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="r-programming.html#cb36-1" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb36-2"><a href="r-programming.html#cb36-2" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span>n <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb36-3"><a href="r-programming.html#cb36-3" tabindex="-1"></a><span class="co">#&gt;  [1] 0 1 2 3 4 5 6 7 8 9</span></span></code></pre></div>
<p>The result is the sequence from 0 to 9; not 1 to 9. To understand why <code>1:n-1</code> returns <code>0,1,...,9</code>, we take a look at the syntax documentation (<code>?Syntax</code>):</p>
<p><img src="images/syntax_documentation.jpg" width="70%" style="display: block; margin: auto;" /></p>
<p>The documentation shows that the colon operator <code>:</code> has a higher precedence than the operator <code>-</code>. Hence, <code>1:n</code> is evaluated first, and <code>-</code> is evaluated afterwards (<code>1:n-1</code> is equivalent to <code>(1:n)-1</code>). To obtain a sequence from 1 to 9, we can change the order of evaluation by using parentheses:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="r-programming.html#cb37-1" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span>(n <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb37-2"><a href="r-programming.html#cb37-2" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4 5 6 7 8 9</span></span></code></pre></div>
<p>Alternatively, we could use the function <code>seq_len()</code> to create a sequence that starts at 1 and with steps of 1 finishes at the number passed to the function.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="r-programming.html#cb38-1" tabindex="-1"></a><span class="fu">seq_len</span>(n)</span>
<span id="cb38-2"><a href="r-programming.html#cb38-2" tabindex="-1"></a><span class="co">#&gt;  [1]  1  2  3  4  5  6  7  8  9 10</span></span>
<span id="cb38-3"><a href="r-programming.html#cb38-3" tabindex="-1"></a><span class="fu">seq_len</span>(n <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb38-4"><a href="r-programming.html#cb38-4" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4 5 6 7 8 9</span></span></code></pre></div>
However, there is one crucial difference between <code>1:n</code> and <code>seq_len(n)</code>, which we will look at in the final example!
</details>
<p><br>
What does the colon operator return when n is equal to 0?</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="r-programming.html#cb39-1" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb39-2"><a href="r-programming.html#cb39-2" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span>n</span></code></pre></div>
<details>
<summary>
Show me!
</summary>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="r-programming.html#cb40-1" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb40-2"><a href="r-programming.html#cb40-2" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span>n</span>
<span id="cb40-3"><a href="r-programming.html#cb40-3" tabindex="-1"></a><span class="co">#&gt; [1] 1 0</span></span></code></pre></div>
<p>Did you expect the output to be <code>1, 0</code>? The colon operator can also generate a sequence from <code>from</code> to <code>to</code> in steps of -1 (when <code>to</code> &lt; <code>from</code>). This behavior can be useful in general, but when <code>:</code> is used in a for loop it is often undesired. In situations like that, use the function <code>seq_len()</code> instead. When zero is passed as an argument, <code>seq_len</code> returns a empty integer vector (<code>integer(0)</code>):</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="r-programming.html#cb41-1" tabindex="-1"></a><span class="fu">seq_len</span>(<span class="dv">0</span>)</span>
<span id="cb41-2"><a href="r-programming.html#cb41-2" tabindex="-1"></a><span class="co">#&gt; integer(0)</span></span></code></pre></div>
<p><code>seq_len()</code> also has a sibling, <code>seq_along()</code>, that can be used generate a sequence that is as long as another vector. More precisely, if <code>x</code> is a vector of length <span class="math inline">\(\geq\)</span> 1, <code>seq_along(x)</code> is a shortcut for <code>seq_len(length(x))</code>:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="r-programming.html#cb42-1" tabindex="-1"></a><span class="fu">seq_along</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">7</span>)</span>
<span id="cb42-2"><a href="r-programming.html#cb42-2" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3</span></span></code></pre></div>
</details>
<p><br></p>
</div>
</div>
<div id="useful-r-functions" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Useful <code>R</code> functions<a href="r-programming.html#useful-r-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now that you have seen common mistakes in <code>R</code> and learned how to avoid them, we will take a look at some useful base <code>R</code> functions. Some of them may be known to you, but we still recommend that you inspect the list.</p>
<div id="general" class="section level3 unnumbered hasAnchor">
<h3>General<a href="r-programming.html#general" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>?topic</code> : Open the documentation on a topic (typically a function or data set) in the <strong>Files</strong> pane. Equivalent to <code>help(topic)</code>.</p></li>
<li><p><code>example(topic)</code> : Run all R code from the <em>Examples</em> section of <code>R</code>’s online help.</p></li>
<li><p><code>str(object)</code> : Compactly display the structure of an <code>R</code> object. Alternative to <code>summary()</code>.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="r-programming.html#cb43-1" tabindex="-1"></a><span class="fu">str</span>(iris)</span>
<span id="cb43-2"><a href="r-programming.html#cb43-2" tabindex="-1"></a><span class="co">#&gt; &#39;data.frame&#39;:    150 obs. of  5 variables:</span></span>
<span id="cb43-3"><a href="r-programming.html#cb43-3" tabindex="-1"></a><span class="co">#&gt;  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...</span></span>
<span id="cb43-4"><a href="r-programming.html#cb43-4" tabindex="-1"></a><span class="co">#&gt;  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...</span></span>
<span id="cb43-5"><a href="r-programming.html#cb43-5" tabindex="-1"></a><span class="co">#&gt;  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...</span></span>
<span id="cb43-6"><a href="r-programming.html#cb43-6" tabindex="-1"></a><span class="co">#&gt;  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...</span></span>
<span id="cb43-7"><a href="r-programming.html#cb43-7" tabindex="-1"></a><span class="co">#&gt;  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</span></span></code></pre></div></li>
<li><p><code>ls()</code> : List the names of the objects in the environment.</p></li>
<li><p><code>rm(list = ls())</code> : Remove all objects from the environment.</p></li>
<li><p><code>methods(generic.function)</code> : List all available implementations of a generic function (see the next Section <a href="r-programming.html#data-structures-in-r">Data structures in <code>R</code></a> for details on methods).</p></li>
<li><p><code>methods(class = [class])</code> : List all available methods implemented for a particular class (see the next Section <a href="r-programming.html#data-structures-in-r">Data structures in <code>R</code></a> for details on methods).</p></li>
<li><p><code>do.call(fct, args)</code> : Call a function <code>fct</code> with a list of arguments.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="r-programming.html#cb44-1" tabindex="-1"></a>(list_of_int <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb44-2"><a href="r-programming.html#cb44-2" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb44-3"><a href="r-programming.html#cb44-3" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb44-4"><a href="r-programming.html#cb44-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb44-5"><a href="r-programming.html#cb44-5" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb44-6"><a href="r-programming.html#cb44-6" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb44-7"><a href="r-programming.html#cb44-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb44-8"><a href="r-programming.html#cb44-8" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb44-9"><a href="r-programming.html#cb44-9" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span>
<span id="cb44-10"><a href="r-programming.html#cb44-10" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb44-11"><a href="r-programming.html#cb44-11" tabindex="-1"></a><span class="co">#&gt; [[4]]</span></span>
<span id="cb44-12"><a href="r-programming.html#cb44-12" tabindex="-1"></a><span class="co">#&gt; [1] 4</span></span>
<span id="cb44-13"><a href="r-programming.html#cb44-13" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb44-14"><a href="r-programming.html#cb44-14" tabindex="-1"></a><span class="co">#&gt; [[5]]</span></span>
<span id="cb44-15"><a href="r-programming.html#cb44-15" tabindex="-1"></a><span class="co">#&gt; [1] 5</span></span>
<span id="cb44-16"><a href="r-programming.html#cb44-16" tabindex="-1"></a><span class="fu">do.call</span>(<span class="st">&quot;c&quot;</span>, list_of_int)</span>
<span id="cb44-17"><a href="r-programming.html#cb44-17" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4 5</span></span>
<span id="cb44-18"><a href="r-programming.html#cb44-18" tabindex="-1"></a><span class="fu">do.call</span>(<span class="st">&quot;rbind&quot;</span>, list_of_int)</span>
<span id="cb44-19"><a href="r-programming.html#cb44-19" tabindex="-1"></a><span class="co">#&gt;      [,1]</span></span>
<span id="cb44-20"><a href="r-programming.html#cb44-20" tabindex="-1"></a><span class="co">#&gt; [1,]    1</span></span>
<span id="cb44-21"><a href="r-programming.html#cb44-21" tabindex="-1"></a><span class="co">#&gt; [2,]    2</span></span>
<span id="cb44-22"><a href="r-programming.html#cb44-22" tabindex="-1"></a><span class="co">#&gt; [3,]    3</span></span>
<span id="cb44-23"><a href="r-programming.html#cb44-23" tabindex="-1"></a><span class="co">#&gt; [4,]    4</span></span>
<span id="cb44-24"><a href="r-programming.html#cb44-24" tabindex="-1"></a><span class="co">#&gt; [5,]    5</span></span></code></pre></div></li>
</ul>
</div>
<div id="sequence-and-vector-operations" class="section level3 unnumbered hasAnchor">
<h3>Sequence and vector operations<a href="r-programming.html#sequence-and-vector-operations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>seq(from, to)</code> : Generate regular sequences (see also the previous section <a href="r-programming.html#common-mistakes-to-avoid">Common mistakes to avoid</a>). Can be used in different ways: By specifying <code>by</code>(the increment of the sequence), <code>length.out</code> (the desired length of the sequence), or <code>along.with</code> (taking the length from the length of this argument). Note that
<code>seq_len(length.out)</code> is a shortcut for <code>seq(from = 1, to = length.out, by = 1)</code>, and that
<code>seg_along(along.with)</code> is a shortcut for <code>seq(from = 1, to = length(along.with), by = 1)</code>.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="r-programming.html#cb45-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb45-2"><a href="r-programming.html#cb45-2" tabindex="-1"></a><span class="co">#&gt; [1] 1 3 5 7 9</span></span>
<span id="cb45-3"><a href="r-programming.html#cb45-3" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">100</span>, <span class="at">length.out =</span> <span class="dv">10</span>)</span>
<span id="cb45-4"><a href="r-programming.html#cb45-4" tabindex="-1"></a><span class="co">#&gt;  [1]   1  12  23  34  45  56  67  78  89 100</span></span>
<span id="cb45-5"><a href="r-programming.html#cb45-5" tabindex="-1"></a></span>
<span id="cb45-6"><a href="r-programming.html#cb45-6" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">5</span>, <span class="at">by =</span> <span class="dv">1</span>)</span>
<span id="cb45-7"><a href="r-programming.html#cb45-7" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4 5</span></span>
<span id="cb45-8"><a href="r-programming.html#cb45-8" tabindex="-1"></a><span class="fu">seq_len</span>(<span class="dv">5</span>)</span>
<span id="cb45-9"><a href="r-programming.html#cb45-9" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4 5</span></span>
<span id="cb45-10"><a href="r-programming.html#cb45-10" tabindex="-1"></a></span>
<span id="cb45-11"><a href="r-programming.html#cb45-11" tabindex="-1"></a><span class="fu">seq_along</span>(<span class="dv">21</span><span class="sc">:</span><span class="dv">24</span>)</span>
<span id="cb45-12"><a href="r-programming.html#cb45-12" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4</span></span>
<span id="cb45-13"><a href="r-programming.html#cb45-13" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="fu">length</span>(<span class="dv">21</span><span class="sc">:</span><span class="dv">24</span>), <span class="at">by =</span> <span class="dv">1</span>)</span>
<span id="cb45-14"><a href="r-programming.html#cb45-14" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4</span></span></code></pre></div></li>
<li><p><code>rep(x)</code> : Replicate the values in <code>x</code>. Can be used in different ways: By specifying <code>times</code> (the number of times to repeat each element or the whole vector), <code>length.out</code> (the desired length of the output vector), or <code>each</code> (the number of times each element of <code>x</code> is repeated). Note that
<code>rep_len(x, length.out)</code> is a shortcut for <code>rep(x, length.out = length.out)</code>, and that
<code>rep.int(x, times)</code> is a shortcut for <code>rep(x, times = times)</code>.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="r-programming.html#cb46-1" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">times =</span> <span class="dv">2</span>)</span>
<span id="cb46-2"><a href="r-programming.html#cb46-2" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4 1 2 3 4</span></span>
<span id="cb46-3"><a href="r-programming.html#cb46-3" tabindex="-1"></a><span class="fu">rep.int</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">2</span>)</span>
<span id="cb46-4"><a href="r-programming.html#cb46-4" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4 1 2 3 4</span></span>
<span id="cb46-5"><a href="r-programming.html#cb46-5" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">times =</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">1</span>)</span>
<span id="cb46-6"><a href="r-programming.html#cb46-6" tabindex="-1"></a><span class="co">#&gt;  [1] 1 1 1 1 2 2 2 3 3 4</span></span>
<span id="cb46-7"><a href="r-programming.html#cb46-7" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">length.out =</span> <span class="dv">6</span>)</span>
<span id="cb46-8"><a href="r-programming.html#cb46-8" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4 1 2</span></span>
<span id="cb46-9"><a href="r-programming.html#cb46-9" tabindex="-1"></a><span class="fu">rep_len</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">6</span>)</span>
<span id="cb46-10"><a href="r-programming.html#cb46-10" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4 1 2</span></span>
<span id="cb46-11"><a href="r-programming.html#cb46-11" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">each =</span> <span class="dv">2</span>)</span>
<span id="cb46-12"><a href="r-programming.html#cb46-12" tabindex="-1"></a><span class="co">#&gt; [1] 1 1 2 2 3 3 4 4</span></span></code></pre></div></li>
<li><p><code>replicate(n, expr)</code> : Repeated evaluation of an expression. Wrapper for the common use of <code>sapply</code>.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="r-programming.html#cb47-1" tabindex="-1"></a><span class="fu">replicate</span>(<span class="dv">5</span>, <span class="fu">rnorm</span>(<span class="dv">10</span>))</span>
<span id="cb47-2"><a href="r-programming.html#cb47-2" tabindex="-1"></a><span class="co">#&gt;             [,1]       [,2]        [,3]       [,4]       [,5]</span></span>
<span id="cb47-3"><a href="r-programming.html#cb47-3" tabindex="-1"></a><span class="co">#&gt;  [1,] -0.8207838  1.3115128  0.97592192 -0.6053306 -1.5024902</span></span>
<span id="cb47-4"><a href="r-programming.html#cb47-4" tabindex="-1"></a><span class="co">#&gt;  [2,] -0.1691501 -0.1072188  2.51488915 -0.7361181 -0.9032597</span></span>
<span id="cb47-5"><a href="r-programming.html#cb47-5" tabindex="-1"></a><span class="co">#&gt;  [3,] -0.4648089 -0.8834901  1.97459553  1.6845147 -0.5406331</span></span>
<span id="cb47-6"><a href="r-programming.html#cb47-6" tabindex="-1"></a><span class="co">#&gt;  [4,] -1.3016545  0.8551399  0.65509625 -0.4404857 -0.1580074</span></span>
<span id="cb47-7"><a href="r-programming.html#cb47-7" tabindex="-1"></a><span class="co">#&gt;  [5,]  0.3812216 -1.6757548 -0.49235212 -0.1067416  0.2990797</span></span>
<span id="cb47-8"><a href="r-programming.html#cb47-8" tabindex="-1"></a><span class="co">#&gt;  [6,] -0.8394270  1.2818228 -0.92316844 -0.5268923 -0.3260360</span></span>
<span id="cb47-9"><a href="r-programming.html#cb47-9" tabindex="-1"></a><span class="co">#&gt;  [7,]  2.0131920  1.1784240  0.01546668 -0.1125450 -1.3855136</span></span>
<span id="cb47-10"><a href="r-programming.html#cb47-10" tabindex="-1"></a><span class="co">#&gt;  [8,] -1.4548519 -0.5138311  0.20060660 -0.6504985  0.3551669</span></span>
<span id="cb47-11"><a href="r-programming.html#cb47-11" tabindex="-1"></a><span class="co">#&gt;  [9,] -1.2298598 -0.7402165 -0.01082200  0.8714970 -0.7065766</span></span>
<span id="cb47-12"><a href="r-programming.html#cb47-12" tabindex="-1"></a><span class="co">#&gt; [10,] -1.3181980  1.0207309  0.87081312 -0.2106940  0.3062946</span></span></code></pre></div>
<p>If you unsure about how to use the different *apply functions in <code>R</code>, we recommend to take a look at <a href="https://stackoverflow.com/questions/3505701/grouping-functions-tapply-by-aggregate-and-the-apply-family">this</a> nice Q/A on grouping functions and the *apply family on Stack Overflow, along with <a href="https://bookdown.org/rdpeng/rprogdatascience/loop-functions.html">Chapter 16</a> from the book <em>R Programming for Data Science</em> by Roger Peng about looping.</p></li>
<li><p><code>sort(x)</code> : Sort or order a vector or factor into ascending or descending order.</p></li>
<li><p><code>order(x)</code> : Get a permutation that rearranges <code>x</code> into ascending or descending order. In the case of ties in the first vector, values in the second are used to break the ties.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="r-programming.html#cb48-1" tabindex="-1"></a><span class="fu">order</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb48-2"><a href="r-programming.html#cb48-2" tabindex="-1"></a><span class="co">#&gt; [1] 1 4 5 2 3</span></span>
<span id="cb48-3"><a href="r-programming.html#cb48-3" tabindex="-1"></a><span class="fu">order</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">2</span>, <span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">1</span>))</span>
<span id="cb48-4"><a href="r-programming.html#cb48-4" tabindex="-1"></a><span class="co">#&gt; [1] 1 5 4 2 3</span></span></code></pre></div></li>
<li><p><code>rank(x)</code> : Get the sample ranks of the values in a vector <code>x</code>.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="r-programming.html#cb49-1" tabindex="-1"></a><span class="fu">rank</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb49-2"><a href="r-programming.html#cb49-2" tabindex="-1"></a><span class="co">#&gt; [1] 1.0 4.0 5.0 2.5 2.5</span></span>
<span id="cb49-3"><a href="r-programming.html#cb49-3" tabindex="-1"></a><span class="fu">rank</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">2</span>, <span class="dv">2</span>), <span class="at">ties.method =</span> <span class="st">&quot;first&quot;</span>)</span>
<span id="cb49-4"><a href="r-programming.html#cb49-4" tabindex="-1"></a><span class="co">#&gt; [1] 1 4 5 2 3</span></span></code></pre></div></li>
<li><p><code>which.min(x)</code> and <code>which.max()</code> : Determine the index of the minimum or maximum of a numeric vector <code>x</code>.</p></li>
<li><p><code>unique(x)</code> : Remove duplicated elements/rows from a vector, data frame or array like <code>x</code>.</p></li>
<li><p><code>table(...)</code> : Build a contingency table of the counts of each combination of factor levels.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="r-programming.html#cb50-1" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">1</span>))</span>
<span id="cb50-2"><a href="r-programming.html#cb50-2" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb50-3"><a href="r-programming.html#cb50-3" tabindex="-1"></a><span class="co">#&gt; 1 2 3 4 </span></span>
<span id="cb50-4"><a href="r-programming.html#cb50-4" tabindex="-1"></a><span class="co">#&gt; 4 3 2 1</span></span>
<span id="cb50-5"><a href="r-programming.html#cb50-5" tabindex="-1"></a><span class="fu">table</span>(<span class="at">A =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>), <span class="at">B =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>))</span>
<span id="cb50-6"><a href="r-programming.html#cb50-6" tabindex="-1"></a><span class="co">#&gt;    B</span></span>
<span id="cb50-7"><a href="r-programming.html#cb50-7" tabindex="-1"></a><span class="co">#&gt; A   1 2</span></span>
<span id="cb50-8"><a href="r-programming.html#cb50-8" tabindex="-1"></a><span class="co">#&gt;   1 2 1</span></span>
<span id="cb50-9"><a href="r-programming.html#cb50-9" tabindex="-1"></a><span class="co">#&gt;   2 1 1</span></span></code></pre></div></li>
<li><p><code>sample()</code> : Take a sample of the specified size from the elements of <code>x</code> either with or without replacement. Note <code>sample(x)</code> is a shortcut for <code>sample(1:x, size = x)</code>, when <code>x</code> has length one, is numeric and positive.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="r-programming.html#cb51-1" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">10</span>)</span>
<span id="cb51-2"><a href="r-programming.html#cb51-2" tabindex="-1"></a><span class="co">#&gt;  [1]  4  3  8  5  6 10  9  2  7  1</span></span>
<span id="cb51-3"><a href="r-programming.html#cb51-3" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">5</span>)</span>
<span id="cb51-4"><a href="r-programming.html#cb51-4" tabindex="-1"></a><span class="co">#&gt; [1]  5  8 10  3  7</span></span>
<span id="cb51-5"><a href="r-programming.html#cb51-5" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">50</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-6"><a href="r-programming.html#cb51-6" tabindex="-1"></a><span class="co">#&gt;  [1] 10  5  5  4  7  9  8  8  4  8 10  4  8 10 10 10  5  9  9  9  8  6  7  4  5  8  8  3</span></span>
<span id="cb51-7"><a href="r-programming.html#cb51-7" tabindex="-1"></a><span class="co">#&gt; [29] 10 10  9 10  3  5  7  7  8  6  4  9  4  6  5 10  5  7  3  6  6  7</span></span></code></pre></div></li>
<li><p><code>round(x)</code> : Round the value in the first argument to the specified number of decimal places. Rounding to a negative number of digits means rounding to a power of ten, i.e.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="r-programming.html#cb52-1" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">12.568</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb52-2"><a href="r-programming.html#cb52-2" tabindex="-1"></a><span class="co">#&gt; [1] 10</span></span>
<span id="cb52-3"><a href="r-programming.html#cb52-3" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">12.568</span>, <span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb52-4"><a href="r-programming.html#cb52-4" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span></code></pre></div></li>
<li><p><code>pmin()</code> and <code>pmax()</code> : Return the regular or parallel maxima and minima of the input values.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="r-programming.html#cb53-1" tabindex="-1"></a>(a <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb53-2"><a href="r-programming.html#cb53-2" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4</span></span>
<span id="cb53-3"><a href="r-programming.html#cb53-3" tabindex="-1"></a>(b <span class="ot">&lt;-</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb53-4"><a href="r-programming.html#cb53-4" tabindex="-1"></a><span class="co">#&gt; [1] 5 4 3 2</span></span>
<span id="cb53-5"><a href="r-programming.html#cb53-5" tabindex="-1"></a><span class="fu">pmin</span>(a, b)</span>
<span id="cb53-6"><a href="r-programming.html#cb53-6" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 2</span></span>
<span id="cb53-7"><a href="r-programming.html#cb53-7" tabindex="-1"></a><span class="fu">pmax</span>(a, b)</span>
<span id="cb53-8"><a href="r-programming.html#cb53-8" tabindex="-1"></a><span class="co">#&gt; [1] 5 4 3 4</span></span></code></pre></div></li>
<li><p><code>outer(X, Y, fun)</code> : Compute the outer product of the arrays <code>X</code> and <code>Y</code> using the function <code>fun</code>. The result is an array of dimension <code>c(dim(X), dim(Y))</code> where each element <span class="math inline">\(A_{xy}\)</span> is equal to <span class="math inline">\(fun(X_x, Y_y)\)</span>.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="r-programming.html#cb54-1" tabindex="-1"></a><span class="fu">outer</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">&quot;+&quot;</span>)</span>
<span id="cb54-2"><a href="r-programming.html#cb54-2" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb54-3"><a href="r-programming.html#cb54-3" tabindex="-1"></a><span class="co">#&gt; [1,]    2    3    4</span></span>
<span id="cb54-4"><a href="r-programming.html#cb54-4" tabindex="-1"></a><span class="co">#&gt; [2,]    3    4    5</span></span>
<span id="cb54-5"><a href="r-programming.html#cb54-5" tabindex="-1"></a><span class="co">#&gt; [3,]    4    5    6</span></span>
<span id="cb54-6"><a href="r-programming.html#cb54-6" tabindex="-1"></a><span class="co">#&gt; [4,]    5    6    7</span></span></code></pre></div></li>
<li><p><code>expand.grid()</code> : Create a data frame from all combinations of the supplied vectors or factors.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="r-programming.html#cb55-1" tabindex="-1"></a><span class="fu">expand.grid</span>(a, b)</span>
<span id="cb55-2"><a href="r-programming.html#cb55-2" tabindex="-1"></a><span class="co">#&gt;    Var1 Var2</span></span>
<span id="cb55-3"><a href="r-programming.html#cb55-3" tabindex="-1"></a><span class="co">#&gt; 1     1    5</span></span>
<span id="cb55-4"><a href="r-programming.html#cb55-4" tabindex="-1"></a><span class="co">#&gt; 2     2    5</span></span>
<span id="cb55-5"><a href="r-programming.html#cb55-5" tabindex="-1"></a><span class="co">#&gt; 3     3    5</span></span>
<span id="cb55-6"><a href="r-programming.html#cb55-6" tabindex="-1"></a><span class="co">#&gt; 4     4    5</span></span>
<span id="cb55-7"><a href="r-programming.html#cb55-7" tabindex="-1"></a><span class="co">#&gt; 5     1    4</span></span>
<span id="cb55-8"><a href="r-programming.html#cb55-8" tabindex="-1"></a><span class="co">#&gt; 6     2    4</span></span>
<span id="cb55-9"><a href="r-programming.html#cb55-9" tabindex="-1"></a><span class="co">#&gt; 7     3    4</span></span>
<span id="cb55-10"><a href="r-programming.html#cb55-10" tabindex="-1"></a><span class="co">#&gt; 8     4    4</span></span>
<span id="cb55-11"><a href="r-programming.html#cb55-11" tabindex="-1"></a><span class="co">#&gt; 9     1    3</span></span>
<span id="cb55-12"><a href="r-programming.html#cb55-12" tabindex="-1"></a><span class="co">#&gt; 10    2    3</span></span>
<span id="cb55-13"><a href="r-programming.html#cb55-13" tabindex="-1"></a><span class="co">#&gt; 11    3    3</span></span>
<span id="cb55-14"><a href="r-programming.html#cb55-14" tabindex="-1"></a><span class="co">#&gt; 12    4    3</span></span>
<span id="cb55-15"><a href="r-programming.html#cb55-15" tabindex="-1"></a><span class="co">#&gt; 13    1    2</span></span>
<span id="cb55-16"><a href="r-programming.html#cb55-16" tabindex="-1"></a><span class="co">#&gt; 14    2    2</span></span>
<span id="cb55-17"><a href="r-programming.html#cb55-17" tabindex="-1"></a><span class="co">#&gt; 15    3    2</span></span>
<span id="cb55-18"><a href="r-programming.html#cb55-18" tabindex="-1"></a><span class="co">#&gt; 16    4    2</span></span></code></pre></div></li>
<li><p><code>match()</code> : Return a vector of positions of (first) matches of the first argument in the second argument</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="r-programming.html#cb56-1" tabindex="-1"></a>(y <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">20</span><span class="sc">:</span><span class="dv">25</span>, <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>))</span>
<span id="cb56-2"><a href="r-programming.html#cb56-2" tabindex="-1"></a><span class="co">#&gt;  [1] 23 20 25 25 25 20 20 20 20 24</span></span>
<span id="cb56-3"><a href="r-programming.html#cb56-3" tabindex="-1"></a><span class="fu">match</span>(y, <span class="dv">20</span><span class="sc">:</span><span class="dv">25</span>)</span>
<span id="cb56-4"><a href="r-programming.html#cb56-4" tabindex="-1"></a><span class="co">#&gt;  [1] 4 1 6 6 6 1 1 1 1 5</span></span></code></pre></div></li>
<li><p><code>%in%</code> : Return a logical vector indicating if there is a match or not for the left operand.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="r-programming.html#cb57-1" tabindex="-1"></a>y <span class="sc">%in%</span> <span class="dv">20</span><span class="sc">:</span><span class="dv">22</span></span>
<span id="cb57-2"><a href="r-programming.html#cb57-2" tabindex="-1"></a><span class="co">#&gt;  [1] FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE</span></span></code></pre></div></li>
<li><p><code>intersect(x, y)</code> : Perform set intersection (<span class="math inline">\(x \cap y\)</span>).</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="r-programming.html#cb58-1" tabindex="-1"></a><span class="fu">intersect</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>))</span>
<span id="cb58-2"><a href="r-programming.html#cb58-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;c&quot; &quot;d&quot;</span></span></code></pre></div></li>
<li><p><code>union(x, y)</code> : Perform set union (<span class="math inline">\(x \cup y\)</span>).</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="r-programming.html#cb59-1" tabindex="-1"></a><span class="fu">union</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>))</span>
<span id="cb59-2"><a href="r-programming.html#cb59-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;</span></span></code></pre></div></li>
<li><p><code>setdiff(x, y)</code> : Perform set asymmetric difference (<span class="math inline">\(x \setminus y\)</span>).</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="r-programming.html#cb60-1" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>))</span>
<span id="cb60-2"><a href="r-programming.html#cb60-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;a&quot; &quot;b&quot;</span></span></code></pre></div></li>
</ul>
</div>
<div id="character-operations" class="section level3 unnumbered hasAnchor">
<h3>Character operations<a href="r-programming.html#character-operations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>paste()</code> : Concatenate vectors after converting to character. To separate the different terms with a special character string, specify the argument <code>sep</code>. To separate the results with a character string, specify the argument <code>collapse</code>. Note that <code>paste0(...)</code> is equivalent to <code>paste(..., sep = "")</code>.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="r-programming.html#cb61-1" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;I&quot;</span>, <span class="st">&quot;am&quot;</span>, <span class="st">&quot;me&quot;</span>)</span>
<span id="cb61-2"><a href="r-programming.html#cb61-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;I am me&quot;</span></span>
<span id="cb61-3"><a href="r-programming.html#cb61-3" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">&quot;I&quot;</span>, <span class="st">&quot;am&quot;</span>, <span class="st">&quot;me&quot;</span>)</span>
<span id="cb61-4"><a href="r-programming.html#cb61-4" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Iamme&quot;</span></span>
<span id="cb61-5"><a href="r-programming.html#cb61-5" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">&quot;PC&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb61-6"><a href="r-programming.html#cb61-6" tabindex="-1"></a><span class="co">#&gt; [1] &quot;PC1&quot; &quot;PC2&quot; &quot;PC3&quot; &quot;PC4&quot; &quot;PC5&quot;</span></span>
<span id="cb61-7"><a href="r-programming.html#cb61-7" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">&quot;PC&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">collapse =</span> <span class="st">&quot; + &quot;</span>)</span>
<span id="cb61-8"><a href="r-programming.html#cb61-8" tabindex="-1"></a><span class="co">#&gt; [1] &quot;PC1 + PC2 + PC3 + PC4 + PC5&quot;</span></span></code></pre></div></li>
<li><p><code>list.files(path, pattern)</code> : Produce a character vector of the names if files or directories in the names directory. If <code>pattern</code> is specified, only file names with match the regular expression defined in <code>pattern</code> will be returned.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="r-programming.html#cb62-1" tabindex="-1"></a><span class="fu">list.files</span>(<span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.Rmd$&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-2"><a href="r-programming.html#cb62-2" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;./good-practices.Rmd&quot;       &quot;./index.Rmd&quot;               </span></span>
<span id="cb62-3"><a href="r-programming.html#cb62-3" tabindex="-1"></a><span class="co">#&gt;  [3] &quot;./intro.Rmd&quot;                &quot;./packages.Rmd&quot;            </span></span>
<span id="cb62-4"><a href="r-programming.html#cb62-4" tabindex="-1"></a><span class="co">#&gt;  [5] &quot;./performance.Rmd&quot;          &quot;./presentation_project.Rmd&quot;</span></span>
<span id="cb62-5"><a href="r-programming.html#cb62-5" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;./r-markdown.Rmd&quot;           &quot;./r-programming.Rmd&quot;       </span></span>
<span id="cb62-6"><a href="r-programming.html#cb62-6" tabindex="-1"></a><span class="co">#&gt;  [9] &quot;./shiny.Rmd&quot;                &quot;./tidyverse.Rmd&quot;</span></span></code></pre></div></li>
<li><p><code>sub(pattern, replacement, x)</code> : Perform replacement of the first match</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="r-programming.html#cb63-1" tabindex="-1"></a><span class="fu">sub</span>(<span class="st">&quot;James&quot;</span>, <span class="st">&quot;Mr.&quot;</span>, <span class="st">&quot;James Bond&quot;</span>)</span>
<span id="cb63-2"><a href="r-programming.html#cb63-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Mr. Bond&quot;</span></span></code></pre></div></li>
<li><p><code>split(x, f)</code> : Divide the data in the vector <code>x</code> into the groups defined by <code>f</code>.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="r-programming.html#cb64-1" tabindex="-1"></a><span class="fu">split</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="dv">4</span>))</span>
<span id="cb64-2"><a href="r-programming.html#cb64-2" tabindex="-1"></a><span class="co">#&gt; $a</span></span>
<span id="cb64-3"><a href="r-programming.html#cb64-3" tabindex="-1"></a><span class="co">#&gt; [1]  1  4  7 10</span></span>
<span id="cb64-4"><a href="r-programming.html#cb64-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb64-5"><a href="r-programming.html#cb64-5" tabindex="-1"></a><span class="co">#&gt; $b</span></span>
<span id="cb64-6"><a href="r-programming.html#cb64-6" tabindex="-1"></a><span class="co">#&gt; [1]  2  5  8 11</span></span>
<span id="cb64-7"><a href="r-programming.html#cb64-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb64-8"><a href="r-programming.html#cb64-8" tabindex="-1"></a><span class="co">#&gt; $c</span></span>
<span id="cb64-9"><a href="r-programming.html#cb64-9" tabindex="-1"></a><span class="co">#&gt; [1]  3  6  9 12</span></span></code></pre></div></li>
</ul>
</div>
<div id="logical-operators" class="section level3 unnumbered hasAnchor">
<h3>Logical operators<a href="r-programming.html#logical-operators" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>|</code> : Logical OR. Performs element-wise comparisons in much the same was as arithmetic operators.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="r-programming.html#cb65-1" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">|</span> <span class="fu">stop</span>(<span class="st">&quot;Both conditions are evaluated&quot;</span>)</span>
<span id="cb65-2"><a href="r-programming.html#cb65-2" tabindex="-1"></a><span class="co">#&gt; Error in eval(expr, envir, enclos): Both conditions are evaluated</span></span></code></pre></div></li>
<li><p><code>||</code> : Logical OR. Evaluation is performed left to right, proceeding only until the result is determined. Hence, if the first condition is <code>TRUE</code>, the second condition is not evaluated.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="r-programming.html#cb66-1" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">||</span> <span class="fu">stop</span>(<span class="st">&quot;The first condiciton is TRUE, therefore the second condition is not evaluated...&quot;</span>)</span>
<span id="cb66-2"><a href="r-programming.html#cb66-2" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb66-3"><a href="r-programming.html#cb66-3" tabindex="-1"></a></span>
<span id="cb66-4"><a href="r-programming.html#cb66-4" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">||</span> <span class="fu">stop</span>(<span class="st">&quot;The first condiciton is FALSE, therefore the second condition is evaluated...&quot;</span>)</span>
<span id="cb66-5"><a href="r-programming.html#cb66-5" tabindex="-1"></a><span class="co">#&gt; Error in eval(expr, envir, enclos): The first condiciton is FALSE, therefore the second condition is evaluated...</span></span></code></pre></div>
<p>Important note: <code>||</code> can only be used with vectors holding one element. Using vectors of more than one element in <code>||</code> will return an error in newer <code>R</code> versions. However, in <code>R</code> versions &lt; 4.3.0, using vectors of more than one element in <code>||</code> will simply evaluate the first element and not raise a warning!</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="r-programming.html#cb67-1" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>) <span class="sc">||</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb67-2"><a href="r-programming.html#cb67-2" tabindex="-1"></a><span class="co">#&gt; Error in c(TRUE, FALSE, TRUE, TRUE) || c(FALSE, TRUE, TRUE, FALSE): &#39;length = 4&#39; in coercion to &#39;logical(1)&#39;</span></span></code></pre></div></li>
<li><p><code>&amp;</code> : Logical AND. Performs element-wise comparisons in much the same was as arithmetic operators.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="r-programming.html#cb68-1" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>) <span class="sc">&amp;</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb68-2"><a href="r-programming.html#cb68-2" tabindex="-1"></a><span class="co">#&gt; [1] FALSE FALSE  TRUE FALSE</span></span></code></pre></div></li>
<li><p><code>&amp;&amp;</code> : Logical AND. Evaluation is performed left to right, proceeding only until the result is determined. Hence, if the first condition is <code>FALSE</code>, the second condition is not evaluated.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="r-programming.html#cb69-1" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">&amp;&amp;</span> <span class="fu">stop</span>(<span class="st">&quot;The first condiciton is FALSE, therefore the second condition is not evaluated...&quot;</span>)</span>
<span id="cb69-2"><a href="r-programming.html#cb69-2" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb69-3"><a href="r-programming.html#cb69-3" tabindex="-1"></a></span>
<span id="cb69-4"><a href="r-programming.html#cb69-4" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">&amp;&amp;</span> <span class="fu">stop</span>(<span class="st">&quot;The first condiciton is TRUE, therefore the second condition is evaluated...&quot;</span>)</span>
<span id="cb69-5"><a href="r-programming.html#cb69-5" tabindex="-1"></a><span class="co">#&gt; Error in eval(expr, envir, enclos): The first condiciton is TRUE, therefore the second condition is evaluated...</span></span></code></pre></div>
<p>Important note: <code>&amp;&amp;</code> can only be used with vectors holding one element. Using vectors of more than one element in <code>&amp;&amp;</code> will return an error in newer <code>R</code> versions. However, in <code>R</code> versions &lt; 4.3.0, using vectors of more than one element in <code>&amp;&amp;</code> will simply evaluate the first element and not raise a warning!</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="r-programming.html#cb70-1" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>) <span class="sc">&amp;&amp;</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb70-2"><a href="r-programming.html#cb70-2" tabindex="-1"></a><span class="co">#&gt; Error in c(TRUE, FALSE, TRUE, TRUE) &amp;&amp; c(FALSE, TRUE, TRUE, FALSE): &#39;length = 4&#39; in coercion to &#39;logical(1)&#39;</span></span></code></pre></div></li>
<li><p><code>ifelse(test, yes, no)</code> : Conditional element selection. <code>yes</code> will be evaluated if and only if any element of <code>test</code> is <code>TRUE</code>, and analogously for <code>no</code>.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="r-programming.html#cb71-1" tabindex="-1"></a><span class="fu">round</span>(x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">10</span>), <span class="at">digits =</span> <span class="dv">5</span>)</span>
<span id="cb71-2"><a href="r-programming.html#cb71-2" tabindex="-1"></a><span class="co">#&gt;  [1] -0.50240  0.28266  0.44570 -0.37639  1.21692 -0.48976  0.01298  0.49920  0.21727</span></span>
<span id="cb71-3"><a href="r-programming.html#cb71-3" tabindex="-1"></a><span class="co">#&gt; [10] -1.09327</span></span>
<span id="cb71-4"><a href="r-programming.html#cb71-4" tabindex="-1"></a><span class="fu">ifelse</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>, x, <span class="sc">-</span>x)</span>
<span id="cb71-5"><a href="r-programming.html#cb71-5" tabindex="-1"></a><span class="co">#&gt;  [1] 0.5023976 0.2826620 0.4457033 0.3763913 1.2169235 0.4897554 0.0129765 0.4992004</span></span>
<span id="cb71-6"><a href="r-programming.html#cb71-6" tabindex="-1"></a><span class="co">#&gt;  [9] 0.2172710 1.0932684</span></span></code></pre></div>
<p><code>ifelse()</code> can be used to handle special cases in a vectorized way, or it can be used to construct a vector by doing element-wise comparisons of two vectors. <code>ifelse()</code> is <strong>NOT</strong> a shortcut for an if-else statement! <code>ifelse()</code> always returns a vector of the same length and attributes as the condition. Hence, if the length of the input vector is one, <code>ifelse()</code> only returns the first element of the returning vector:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="r-programming.html#cb72-1" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="cn">FALSE</span>, <span class="dv">0</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb72-2"><a href="r-programming.html#cb72-2" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span></code></pre></div>
<p>If the input is of type <code>integer</code>, <code>ifelse()</code> returns a vector of type integer:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="r-programming.html#cb73-1" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="dv">1</span>, <span class="fu">Sys.Date</span>(), <span class="dv">0</span>)</span>
<span id="cb73-2"><a href="r-programming.html#cb73-2" tabindex="-1"></a><span class="co">#&gt; [1] 19956</span></span></code></pre></div>
<p>If you want a more compact way of writing a standard if-else statement, you can use the function `<code>if</code>()`:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="r-programming.html#cb74-1" tabindex="-1"></a><span class="st">`</span><span class="at">if</span><span class="st">`</span>(<span class="cn">FALSE</span>, <span class="dv">0</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb74-2"><a href="r-programming.html#cb74-2" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4 5</span></span>
<span id="cb74-3"><a href="r-programming.html#cb74-3" tabindex="-1"></a><span class="st">`</span><span class="at">if</span><span class="st">`</span>(<span class="cn">TRUE</span>, <span class="fu">Sys.Date</span>(), <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb74-4"><a href="r-programming.html#cb74-4" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2024-08-21&quot;</span></span></code></pre></div>
<p>In simple cases, however, the standard if-else statement can also be written very compact:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="r-programming.html#cb75-1" tabindex="-1"></a><span class="cf">if</span> (<span class="cn">FALSE</span>) <span class="dv">0</span> <span class="cf">else</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb75-2"><a href="r-programming.html#cb75-2" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4 5</span></span></code></pre></div>
<p>To learn more about the behavior of <code>ifelse()</code> and why it is easily misunderstood, read Florian’s
blog post <a href="https://privefl.github.io/blog/On-the-ifelse-function/"><em>On the ifelse function</em></a>.</p></li>
</ul>
<p>You can find many other useful base <code>R</code> functions in <a href="https://github.com/peterhurford/adv-r-book-solutions/blob/master/03_vocab/functions.r">this</a> GitHub repository or in <a href="https://cran.r-project.org/doc/contrib/Kauffmann_aide_memoire_R.pdf">this</a> french documentation on cran.</p>
</div>
<div id="useful-non-base-r-functions" class="section level3 unnumbered hasAnchor">
<h3>Useful non-base R functions<a href="r-programming.html#useful-non-base-r-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The following functions are not part of base <code>R</code>, but they are still very useful:</p>
<ul>
<li><p><code>skimr::skim(data.frame)</code> : Quickly provide a broad overview of a data frame. Alternative to <code>summary()</code>.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="r-programming.html#cb76-1" tabindex="-1"></a>skimr<span class="sc">::</span><span class="fu">skim</span>(iris)</span></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-63">Table 3.1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">iris</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">150</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">5</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">factor</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">4</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table style="width:100%;">
<colgroup>
<col width="17%" />
<col width="12%" />
<col width="17%" />
<col width="9%" />
<col width="11%" />
<col width="32%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">ordered</th>
<th align="right">n_unique</th>
<th align="left">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Species</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">3</td>
<td align="left">set: 50, ver: 50, vir: 50</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table style="width:100%;">
<colgroup>
<col width="18%" />
<col width="13%" />
<col width="18%" />
<col width="6%" />
<col width="6%" />
<col width="5%" />
<col width="5%" />
<col width="6%" />
<col width="5%" />
<col width="6%" />
<col width="7%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Sepal.Length</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">5.84</td>
<td align="right">0.83</td>
<td align="right">4.3</td>
<td align="right">5.1</td>
<td align="right">5.80</td>
<td align="right">6.4</td>
<td align="right">7.9</td>
<td align="left">▆▇▇▅▂</td>
</tr>
<tr class="even">
<td align="left">Sepal.Width</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">3.06</td>
<td align="right">0.44</td>
<td align="right">2.0</td>
<td align="right">2.8</td>
<td align="right">3.00</td>
<td align="right">3.3</td>
<td align="right">4.4</td>
<td align="left">▁▆▇▂▁</td>
</tr>
<tr class="odd">
<td align="left">Petal.Length</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">3.76</td>
<td align="right">1.77</td>
<td align="right">1.0</td>
<td align="right">1.6</td>
<td align="right">4.35</td>
<td align="right">5.1</td>
<td align="right">6.9</td>
<td align="left">▇▁▆▇▂</td>
</tr>
<tr class="even">
<td align="left">Petal.Width</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1.20</td>
<td align="right">0.76</td>
<td align="right">0.1</td>
<td align="right">0.3</td>
<td align="right">1.30</td>
<td align="right">1.8</td>
<td align="right">2.5</td>
<td align="left">▇▁▇▅▃</td>
</tr>
</tbody>
</table></li>
<li><p><code>glue::glue()</code> : Format and interpolate a string. Expressions enclosed by braces are evaluated as <code>R</code> code.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="r-programming.html#cb77-1" tabindex="-1"></a>me <span class="ot">&lt;-</span> <span class="st">&quot;Florian&quot;</span></span>
<span id="cb77-2"><a href="r-programming.html#cb77-2" tabindex="-1"></a>glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">&quot;I am {me}&quot;</span>)</span>
<span id="cb77-3"><a href="r-programming.html#cb77-3" tabindex="-1"></a><span class="co">#&gt; I am Florian</span></span></code></pre></div></li>
<li><p><code>gtools::mixedsort(x)</code> : Sort character strings containing embedded numbers so that the numbers are numerically sorted rather than sorted by character value.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="r-programming.html#cb78-1" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">c</span>(<span class="st">&quot;a1&quot;</span>, <span class="st">&quot;a2&quot;</span>, <span class="st">&quot;a10&quot;</span>))</span>
<span id="cb78-2"><a href="r-programming.html#cb78-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;a1&quot;  &quot;a10&quot; &quot;a2&quot;</span></span>
<span id="cb78-3"><a href="r-programming.html#cb78-3" tabindex="-1"></a>gtools<span class="sc">::</span><span class="fu">mixedsort</span>(<span class="fu">c</span>(<span class="st">&quot;a1&quot;</span>, <span class="st">&quot;a2&quot;</span>, <span class="st">&quot;a10&quot;</span>))</span>
<span id="cb78-4"><a href="r-programming.html#cb78-4" tabindex="-1"></a><span class="co">#&gt; [1] &quot;a1&quot;  &quot;a2&quot;  &quot;a10&quot;</span></span></code></pre></div></li>
<li><p><code>dplyr::case_when()</code> : Vectorize multiple <code>ifelse()</code> statements. Each case is evaluated sequentially and the first match for each element determines the corresponding value in the output vector.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="r-programming.html#cb79-1" tabindex="-1"></a><span class="fu">round</span>(x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">runif</span>(<span class="dv">20</span>, <span class="at">min =</span> <span class="fl">15.0</span>, <span class="at">max =</span> <span class="fl">50.0</span>), <span class="cn">NA</span>), <span class="at">digits =</span> <span class="dv">4</span>)</span>
<span id="cb79-2"><a href="r-programming.html#cb79-2" tabindex="-1"></a><span class="co">#&gt;  [1] 23.8219 38.6441 20.3800 36.4338 27.7948 34.4850 37.3933 26.5234 34.7057 25.4101</span></span>
<span id="cb79-3"><a href="r-programming.html#cb79-3" tabindex="-1"></a><span class="co">#&gt; [11] 43.4075 38.4148 24.1281 31.5334 36.2880 46.2198 30.2117 27.2336 48.6989 21.9811</span></span>
<span id="cb79-4"><a href="r-programming.html#cb79-4" tabindex="-1"></a><span class="co">#&gt; [21]      NA</span></span>
<span id="cb79-5"><a href="r-programming.html#cb79-5" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">case_when</span>(x <span class="sc">&lt;</span> <span class="fl">16.0</span> <span class="sc">~</span> <span class="st">&quot;Severely Underweight&quot;</span>,</span>
<span id="cb79-6"><a href="r-programming.html#cb79-6" tabindex="-1"></a>  x <span class="sc">&lt;=</span> <span class="fl">18.4</span> <span class="sc">~</span> <span class="st">&quot;Underweight&quot;</span>,</span>
<span id="cb79-7"><a href="r-programming.html#cb79-7" tabindex="-1"></a>  x <span class="sc">&lt;=</span> <span class="fl">24.9</span> <span class="sc">~</span> <span class="st">&quot;Normal&quot;</span>,</span>
<span id="cb79-8"><a href="r-programming.html#cb79-8" tabindex="-1"></a>  x <span class="sc">&lt;=</span> <span class="fl">29.9</span> <span class="sc">~</span> <span class="st">&quot;Overweight&quot;</span>,</span>
<span id="cb79-9"><a href="r-programming.html#cb79-9" tabindex="-1"></a>  x <span class="sc">&lt;=</span> <span class="fl">34.9</span> <span class="sc">~</span> <span class="st">&quot;Moderate Obese&quot;</span>,</span>
<span id="cb79-10"><a href="r-programming.html#cb79-10" tabindex="-1"></a>  x <span class="sc">&lt;=</span> <span class="fl">39.9</span> <span class="sc">~</span> <span class="st">&quot;Severely Obese&quot;</span>,</span>
<span id="cb79-11"><a href="r-programming.html#cb79-11" tabindex="-1"></a>  x <span class="sc">&gt;=</span> <span class="fl">40.0</span> <span class="sc">~</span> <span class="st">&quot;Morbidly Obese&quot;</span>,</span>
<span id="cb79-12"><a href="r-programming.html#cb79-12" tabindex="-1"></a>  <span class="at">.default =</span> <span class="fu">as.character</span>(<span class="cn">NA</span>)</span>
<span id="cb79-13"><a href="r-programming.html#cb79-13" tabindex="-1"></a>)</span>
<span id="cb79-14"><a href="r-programming.html#cb79-14" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;Normal&quot;         &quot;Severely Obese&quot; &quot;Normal&quot;         &quot;Severely Obese&quot; &quot;Overweight&quot;    </span></span>
<span id="cb79-15"><a href="r-programming.html#cb79-15" tabindex="-1"></a><span class="co">#&gt;  [6] &quot;Moderate Obese&quot; &quot;Severely Obese&quot; &quot;Overweight&quot;     &quot;Moderate Obese&quot; &quot;Overweight&quot;    </span></span>
<span id="cb79-16"><a href="r-programming.html#cb79-16" tabindex="-1"></a><span class="co">#&gt; [11] &quot;Morbidly Obese&quot; &quot;Severely Obese&quot; &quot;Normal&quot;         &quot;Moderate Obese&quot; &quot;Severely Obese&quot;</span></span>
<span id="cb79-17"><a href="r-programming.html#cb79-17" tabindex="-1"></a><span class="co">#&gt; [16] &quot;Morbidly Obese&quot; &quot;Moderate Obese&quot; &quot;Overweight&quot;     &quot;Morbidly Obese&quot; &quot;Normal&quot;        </span></span>
<span id="cb79-18"><a href="r-programming.html#cb79-18" tabindex="-1"></a><span class="co">#&gt; [21] NA</span></span></code></pre></div></li>
</ul>
</div>
<div id="exercises" class="section level3 unnumbered hasAnchor">
<h3>Exercises<a href="r-programming.html#exercises" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>Use <code>sample()</code>, <code>rep_len()</code> and <code>split()</code> to make a function that randomly splits some indices in a list of <code>K</code> groups of indices (like for cross-validation). [Which are the special cases that you should consider?]</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="r-programming.html#cb80-1" tabindex="-1"></a>advr38pkg<span class="sc">::</span><span class="fu">split_ind</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">40</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>#&gt; $`1`
#&gt;  [1]  7  8 14 17 18 19 26 28 29 31 32 37 39 40
#&gt; 
#&gt; $`2`
#&gt;  [1]  3  4  5  9 10 11 13 20 21 22 25 27 33
#&gt; 
#&gt; $`3`
#&gt;  [1]  1  2  6 12 15 16 23 24 30 34 35 36 38</code></pre></li>
<li><p>Use <code>replicate()</code> and <code>sample()</code> to get a 95% confidence interval (using bootstrapping) for the mean of the following vector:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="r-programming.html#cb82-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb82-2"><a href="r-programming.html#cb82-2" tabindex="-1"></a>(x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">10</span>))</span></code></pre></div>
<pre><code>#&gt;  [1] -0.6264538  0.1836433 -0.8356286  1.5952808  0.3295078 -0.8204684  0.4874291
#&gt;  [8]  0.7383247  0.5757814 -0.3053884</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="r-programming.html#cb84-1" tabindex="-1"></a><span class="fu">mean</span>(x)</span></code></pre></div>
<pre><code>#&gt; [1] 0.1322028</code></pre>
<p>Expected output (approximately):</p>
<pre><code>#&gt;       2.5%      97.5% 
#&gt; -0.3145143  0.5998608</code></pre></li>
<li><p>Use <code>match()</code> and some special accessor to add a column “my_val” to the data <code>my_mtcars</code> by putting the corresponding value of the column specified in “my_col”. [Can your solution be used for any number of column names?]</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="r-programming.html#cb87-1" tabindex="-1"></a>my_mtcars <span class="ot">&lt;-</span> mtcars[<span class="fu">c</span>(<span class="st">&quot;mpg&quot;</span>, <span class="st">&quot;hp&quot;</span>)]</span>
<span id="cb87-2"><a href="r-programming.html#cb87-2" tabindex="-1"></a>my_mtcars<span class="sc">$</span>my_col <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;mpg&quot;</span>, <span class="st">&quot;hp&quot;</span>), <span class="at">size =</span> <span class="fu">nrow</span>(my_mtcars), <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb87-3"><a href="r-programming.html#cb87-3" tabindex="-1"></a><span class="fu">head</span>(my_mtcars)</span></code></pre></div>
<pre><code>#&gt;                    mpg  hp my_col
#&gt; Mazda RX4         21.0 110    mpg
#&gt; Mazda RX4 Wag     21.0 110    mpg
#&gt; Datsun 710        22.8  93     hp
#&gt; Hornet 4 Drive    21.4 110     hp
#&gt; Hornet Sportabout 18.7 175    mpg
#&gt; Valiant           18.1 105     hp</code></pre>
<p>Expected result (head):</p>
<pre><code>#&gt;                    mpg  hp my_col my_val
#&gt; Mazda RX4         21.0 110    mpg   21.0
#&gt; Mazda RX4 Wag     21.0 110    mpg   21.0
#&gt; Datsun 710        22.8  93     hp     93
#&gt; Hornet 4 Drive    21.4 110     hp    110
#&gt; Hornet Sportabout 18.7 175    mpg   18.7
#&gt; Valiant           18.1 105     hp    105</code></pre></li>
<li><p>In the following data frame (recall that a data frame is also a list), for the first 3 columns, replace letters by corresponding numbers based on the <code>code</code>:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="r-programming.html#cb90-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb90-2"><a href="r-programming.html#cb90-2" tabindex="-1"></a>  <span class="at">id1 =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;a&quot;</span>),</span>
<span id="cb90-3"><a href="r-programming.html#cb90-3" tabindex="-1"></a>  <span class="at">id2 =</span> <span class="fu">c</span>(<span class="st">&quot;b&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;e&quot;</span>), </span>
<span id="cb90-4"><a href="r-programming.html#cb90-4" tabindex="-1"></a>  <span class="at">id3 =</span> <span class="fu">c</span>(<span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;f&quot;</span>),</span>
<span id="cb90-5"><a href="r-programming.html#cb90-5" tabindex="-1"></a>  <span class="at">inter =</span> <span class="fu">c</span>(<span class="fl">7.343</span>, <span class="fl">2.454</span>, <span class="fl">3.234</span>),</span>
<span id="cb90-6"><a href="r-programming.html#cb90-6" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb90-7"><a href="r-programming.html#cb90-7" tabindex="-1"></a>)</span>
<span id="cb90-8"><a href="r-programming.html#cb90-8" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>#&gt;   id1 id2 id3 inter
#&gt; 1   a   b   c 7.343
#&gt; 2   f   e   d 2.454
#&gt; 3   a   e   f 3.234</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="r-programming.html#cb92-1" tabindex="-1"></a>(code <span class="ot">&lt;-</span> <span class="fu">setNames</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]))</span></code></pre></div>
<pre><code>#&gt; a b c d e f 
#&gt; 1 2 3 4 5 6</code></pre>
<p>Expected result:</p>
<pre><code>#&gt;   id1 id2 id3 inter
#&gt; 1   1   2   3 7.343
#&gt; 2   6   5   4 2.454
#&gt; 3   1   5   6 3.234</code></pre></li>
</ol>
</div>
</div>
<div id="data-structures-in-r" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Data structures in <code>R</code><a href="r-programming.html#data-structures-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>R</code> provides a number of data structures, i.e. particular ways of organizing data to make their use more effective. These data structures are referred to as objects. In this chapter, we will take a look at the most frequently used objects in <code>R</code>.</p>
<div id="types" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Types<a href="r-programming.html#types" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>All <code>R</code> objects have a type. <code>R</code> supports more than 20 different types (see all of them <a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Objects">here</a>), but we will only focus on four of six basic (<em>atomic</em>) vector types in this section, namely <code>logical</code>, <code>integer</code>, <code>double</code> (often called <code>numeric</code>), and <code>character</code>.
Atomic vectors represent the most simple data structure in <code>R</code>. They are one dimensional and homogeneous, which means that all contents must be of the same type. Single numbers, such as <code>12.568</code>, and strings, such as <code>Hello world</code>, are vectors; just of length 1.
The fact that all components of an atomic vectors must be of the same type means that they are often coerced to different types during operations. <code>R</code> objects are coerced according to the following precedence:</p>
<ul>
<li><code>logical</code> : Logical vectors have the lowest precedence. Whenever a logical vector is combined with a vector of another type, the logical vector will be turned into the other type.</li>
<li><code>integer</code> : Integer vectors have the second lowest precedence. Combining an integer vector with a vector of type <code>double</code> or <code>character</code>, will result in a vector of type <code>double</code> or <code>character</code>, respectively.</li>
<li><code>double</code> : Vectors of type <code>double</code> have the second highest precedence. They will only change type when they are combined with a vector of type <code>character</code>.</li>
<li><code>character</code> : Character vectors are never coerced. When you combine two or more vectors, one of them being of type <code>character</code>, the resulting vector will be of type <code>character</code> as well.</li>
</ul>
<p>In most situations, you do not have to worry about coercion, as <code>R</code> usually coerces the relevant objects automatically. However, some functions may not be able to coerce objects (due to the precedence). In those cases, <code>R</code> returns an error. Let us consider some examples. We define four vectors, one of each type:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="r-programming.html#cb95-1" tabindex="-1"></a>(logi_vec <span class="ot">&lt;-</span> <span class="cn">FALSE</span>)</span>
<span id="cb95-2"><a href="r-programming.html#cb95-2" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb95-3"><a href="r-programming.html#cb95-3" tabindex="-1"></a><span class="fu">typeof</span>(logi_vec)</span>
<span id="cb95-4"><a href="r-programming.html#cb95-4" tabindex="-1"></a><span class="co">#&gt; [1] &quot;logical&quot;</span></span>
<span id="cb95-5"><a href="r-programming.html#cb95-5" tabindex="-1"></a></span>
<span id="cb95-6"><a href="r-programming.html#cb95-6" tabindex="-1"></a>(int_vec <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb95-7"><a href="r-programming.html#cb95-7" tabindex="-1"></a><span class="co">#&gt;  [1]  1  2  3  4  5  6  7  8  9 10</span></span>
<span id="cb95-8"><a href="r-programming.html#cb95-8" tabindex="-1"></a><span class="fu">typeof</span>(int_vec)</span>
<span id="cb95-9"><a href="r-programming.html#cb95-9" tabindex="-1"></a><span class="co">#&gt; [1] &quot;integer&quot;</span></span>
<span id="cb95-10"><a href="r-programming.html#cb95-10" tabindex="-1"></a></span>
<span id="cb95-11"><a href="r-programming.html#cb95-11" tabindex="-1"></a>(dbl_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">2.5</span>, <span class="fl">12.568</span>))</span>
<span id="cb95-12"><a href="r-programming.html#cb95-12" tabindex="-1"></a><span class="co">#&gt; [1]  2.500 12.568</span></span>
<span id="cb95-13"><a href="r-programming.html#cb95-13" tabindex="-1"></a><span class="fu">typeof</span>(dbl_vec)</span>
<span id="cb95-14"><a href="r-programming.html#cb95-14" tabindex="-1"></a><span class="co">#&gt; [1] &quot;double&quot;</span></span>
<span id="cb95-15"><a href="r-programming.html#cb95-15" tabindex="-1"></a></span>
<span id="cb95-16"><a href="r-programming.html#cb95-16" tabindex="-1"></a>(char_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;abc&quot;</span>))</span>
<span id="cb95-17"><a href="r-programming.html#cb95-17" tabindex="-1"></a><span class="co">#&gt; [1] &quot;abc&quot;</span></span>
<span id="cb95-18"><a href="r-programming.html#cb95-18" tabindex="-1"></a><span class="fu">typeof</span>(char_vec)</span>
<span id="cb95-19"><a href="r-programming.html#cb95-19" tabindex="-1"></a><span class="co">#&gt; [1] &quot;character&quot;</span></span></code></pre></div>
<p>What is the type of each of the resulting vectors below?</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="r-programming.html#cb96-1" tabindex="-1"></a><span class="fu">c</span>(logi_vec, int_vec)</span>
<span id="cb96-2"><a href="r-programming.html#cb96-2" tabindex="-1"></a></span>
<span id="cb96-3"><a href="r-programming.html#cb96-3" tabindex="-1"></a><span class="fu">c</span>(int_vec, dbl_vec)</span>
<span id="cb96-4"><a href="r-programming.html#cb96-4" tabindex="-1"></a></span>
<span id="cb96-5"><a href="r-programming.html#cb96-5" tabindex="-1"></a><span class="fu">c</span>(logi_vec, char_vec)</span></code></pre></div>
<details>
<summary>
Show me!
</summary>
<div class="sourceCode" id="cb97"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb97-1"><a href="r-programming.html#cb97-1"></a><span class="fu">typeof</span>(<span class="fu">c</span>(logi_vec, int_vec))</span>
<span id="cb97-2"><a href="r-programming.html#cb97-2"></a><span class="co">#&gt; [1] &quot;integer&quot;</span></span>
<span id="cb97-3"><a href="r-programming.html#cb97-3"></a></span>
<span id="cb97-4"><a href="r-programming.html#cb97-4"></a><span class="fu">typeof</span>(<span class="fu">c</span>(int_vec, dbl_vec))</span>
<span id="cb97-5"><a href="r-programming.html#cb97-5"></a><span class="co">#&gt; [1] &quot;double&quot;</span></span>
<span id="cb97-6"><a href="r-programming.html#cb97-6"></a></span>
<span id="cb97-7"><a href="r-programming.html#cb97-7"></a><span class="fu">typeof</span>(<span class="fu">c</span>(logi_vec, char_vec))</span>
<span id="cb97-8"><a href="r-programming.html#cb97-8"></a><span class="co">#&gt; [1] &quot;character&quot;</span></span></code></pre></div>
Line 1: The logical vector <code>logi_vec</code> is coerced to an integer vector (<code>FALSE</code> is coerced to <code>0</code>), and the resulting vector is of type <code>integer</code>.
Line 3: The integer vector <code>int_vec</code> is coerced to a double vector, which is why <code>c(int_vec, dbl_vec)</code> is of type <code>double</code>.
Line 5: The logical vector <code>logi_vec</code> is coerced to a character vector, and the result is a vector of type <code>character</code>.
</details>
<p><br></p>
<p>What is the result of the following operations? Is <code>R</code> able to coerce the objects into the required type, or will it return an error?</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="r-programming.html#cb98-1" tabindex="-1"></a>logi_vec <span class="sc">&lt;</span> char_vec</span>
<span id="cb98-2"><a href="r-programming.html#cb98-2" tabindex="-1"></a></span>
<span id="cb98-3"><a href="r-programming.html#cb98-3" tabindex="-1"></a><span class="fu">min</span>(int_vec, dbl_vec)</span>
<span id="cb98-4"><a href="r-programming.html#cb98-4" tabindex="-1"></a></span>
<span id="cb98-5"><a href="r-programming.html#cb98-5" tabindex="-1"></a>logi_vec <span class="sc">+</span> char_vec</span></code></pre></div>
<details>
<summary>
Show me!
</summary>
<div class="sourceCode" id="cb99"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb99-1"><a href="r-programming.html#cb99-1"></a>logi_vec <span class="sc">&lt;</span> char_vec</span>
<span id="cb99-2"><a href="r-programming.html#cb99-2"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb99-3"><a href="r-programming.html#cb99-3"></a></span>
<span id="cb99-4"><a href="r-programming.html#cb99-4"></a><span class="fu">min</span>(int_vec, dbl_vec)</span>
<span id="cb99-5"><a href="r-programming.html#cb99-5"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb99-6"><a href="r-programming.html#cb99-6"></a></span>
<span id="cb99-7"><a href="r-programming.html#cb99-7"></a>logi_vec <span class="sc">+</span> char_vec</span>
<span id="cb99-8"><a href="r-programming.html#cb99-8"></a><span class="co">#&gt; Error in logi_vec + char_vec: non-numeric argument to binary operator</span></span></code></pre></div>
Line 1: The logical vector <code>logi_vec</code> is coerced to a character vector. The operator <code>&lt;</code> is able to compare strings (using lexicographic orders), and as <code>F</code> comes after <code>a</code> in the alphabet, the comparison returns <code>FALSE</code>.
Line 3: The integer vector <code>int_vec</code> is coerced to a double vector, and <code>min(int_vec, dbl_vec)</code> returns <code>1</code>.
Line 5: The logical vector <code>logi_vec</code> can be coerced to a character vector, but <code>char_vec</code> cannot be coreced to a integer or double vector. As <code>+</code> is only implemented for numeric or complex vectors, <code>R</code> returns an error.
</details>
<p><br></p>
<div id="exercises-1" class="section level4 unnumbered hasAnchor">
<h4>Exercises<a href="r-programming.html#exercises-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li>Why is the default missing value, NA, a logical vector?</li>
<li>How can you use the automatic type coercion to convert this boolean matrix to a numeric one (with 0s and 1s)?</li>
</ol>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="r-programming.html#cb100-1" tabindex="-1"></a>(mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">sample</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="dv">12</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>), <span class="at">nrow =</span> <span class="dv">3</span>))</span>
<span id="cb100-2"><a href="r-programming.html#cb100-2" tabindex="-1"></a><span class="co">#&gt;       [,1]  [,2]  [,3]  [,4]</span></span>
<span id="cb100-3"><a href="r-programming.html#cb100-3" tabindex="-1"></a><span class="co">#&gt; [1,] FALSE  TRUE  TRUE  TRUE</span></span>
<span id="cb100-4"><a href="r-programming.html#cb100-4" tabindex="-1"></a><span class="co">#&gt; [2,] FALSE FALSE FALSE FALSE</span></span>
<span id="cb100-5"><a href="r-programming.html#cb100-5" tabindex="-1"></a><span class="co">#&gt; [3,] FALSE  TRUE  TRUE FALSE</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>What do you need to change in the code above to obtain an integer matrix immediately?</li>
</ol>
</div>
</div>
<div id="objects-and-attributes" class="section level3 hasAnchor" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Objects and attributes<a href="r-programming.html#objects-and-attributes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In the previous section, we have introduced the most simple data structure in <code>R</code>: atomic vectors. Recall that atomic vectors are one dimensional and homogeneous, which means that all components must be of the same base type (<code>logical</code>, <code>integer</code>, <code>double</code>, or <code>character</code>). <code>R</code> provides another one-dimensional data structure; generic vectors, better known as lists. The important difference between atomic vectors and generic vectors/lists is that lists can contain different types, i.e. lists are heterogeneous.</p>
<p>All vectors (i.e. atomic and generic) can have one or more <em>attributes</em>. Attributes are name-value pairs that attach metadata to an object. They can be accessed and modified with <code>attributes()</code> (to get a list of all attributes) and <code>attr()</code> (to access a particular component). By adding specific attributes to vectors, we obtain other important data structures like matrices, arrays, and data frames.</p>
<p>Two-dimensional matrices and multi-dimensional arrays are obtained from atomic vectors by adding the dimensions attribute <code>dim</code>:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="r-programming.html#cb101-1" tabindex="-1"></a><span class="co"># Defining an atomic vector</span></span>
<span id="cb101-2"><a href="r-programming.html#cb101-2" tabindex="-1"></a>(vec <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>)</span>
<span id="cb101-3"><a href="r-programming.html#cb101-3" tabindex="-1"></a><span class="co">#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12</span></span>
<span id="cb101-4"><a href="r-programming.html#cb101-4" tabindex="-1"></a><span class="fu">attributes</span>(vec)</span>
<span id="cb101-5"><a href="r-programming.html#cb101-5" tabindex="-1"></a><span class="co">#&gt; NULL</span></span>
<span id="cb101-6"><a href="r-programming.html#cb101-6" tabindex="-1"></a></span>
<span id="cb101-7"><a href="r-programming.html#cb101-7" tabindex="-1"></a><span class="co"># Modifying the attribute &#39;dim&#39;</span></span>
<span id="cb101-8"><a href="r-programming.html#cb101-8" tabindex="-1"></a><span class="fu">dim</span>(vec) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb101-9"><a href="r-programming.html#cb101-9" tabindex="-1"></a>vec</span>
<span id="cb101-10"><a href="r-programming.html#cb101-10" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></span>
<span id="cb101-11"><a href="r-programming.html#cb101-11" tabindex="-1"></a><span class="co">#&gt; [1,]    1    4    7   10</span></span>
<span id="cb101-12"><a href="r-programming.html#cb101-12" tabindex="-1"></a><span class="co">#&gt; [2,]    2    5    8   11</span></span>
<span id="cb101-13"><a href="r-programming.html#cb101-13" tabindex="-1"></a><span class="co">#&gt; [3,]    3    6    9   12</span></span>
<span id="cb101-14"><a href="r-programming.html#cb101-14" tabindex="-1"></a><span class="fu">attributes</span>(vec)</span>
<span id="cb101-15"><a href="r-programming.html#cb101-15" tabindex="-1"></a><span class="co">#&gt; $dim</span></span>
<span id="cb101-16"><a href="r-programming.html#cb101-16" tabindex="-1"></a><span class="co">#&gt; [1] 3 4</span></span>
<span id="cb101-17"><a href="r-programming.html#cb101-17" tabindex="-1"></a><span class="fu">class</span>(vec)</span>
<span id="cb101-18"><a href="r-programming.html#cb101-18" tabindex="-1"></a><span class="co">#&gt; [1] &quot;matrix&quot; &quot;array&quot;</span></span>
<span id="cb101-19"><a href="r-programming.html#cb101-19" tabindex="-1"></a></span>
<span id="cb101-20"><a href="r-programming.html#cb101-20" tabindex="-1"></a><span class="co"># Modifying the attribute &#39;dim&#39; once more</span></span>
<span id="cb101-21"><a href="r-programming.html#cb101-21" tabindex="-1"></a><span class="fu">dim</span>(vec) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb101-22"><a href="r-programming.html#cb101-22" tabindex="-1"></a>vec</span>
<span id="cb101-23"><a href="r-programming.html#cb101-23" tabindex="-1"></a><span class="co">#&gt; , , 1</span></span>
<span id="cb101-24"><a href="r-programming.html#cb101-24" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb101-25"><a href="r-programming.html#cb101-25" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2]</span></span>
<span id="cb101-26"><a href="r-programming.html#cb101-26" tabindex="-1"></a><span class="co">#&gt; [1,]    1    4</span></span>
<span id="cb101-27"><a href="r-programming.html#cb101-27" tabindex="-1"></a><span class="co">#&gt; [2,]    2    5</span></span>
<span id="cb101-28"><a href="r-programming.html#cb101-28" tabindex="-1"></a><span class="co">#&gt; [3,]    3    6</span></span>
<span id="cb101-29"><a href="r-programming.html#cb101-29" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb101-30"><a href="r-programming.html#cb101-30" tabindex="-1"></a><span class="co">#&gt; , , 2</span></span>
<span id="cb101-31"><a href="r-programming.html#cb101-31" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb101-32"><a href="r-programming.html#cb101-32" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2]</span></span>
<span id="cb101-33"><a href="r-programming.html#cb101-33" tabindex="-1"></a><span class="co">#&gt; [1,]    7   10</span></span>
<span id="cb101-34"><a href="r-programming.html#cb101-34" tabindex="-1"></a><span class="co">#&gt; [2,]    8   11</span></span>
<span id="cb101-35"><a href="r-programming.html#cb101-35" tabindex="-1"></a><span class="co">#&gt; [3,]    9   12</span></span>
<span id="cb101-36"><a href="r-programming.html#cb101-36" tabindex="-1"></a><span class="fu">attributes</span>(vec)</span>
<span id="cb101-37"><a href="r-programming.html#cb101-37" tabindex="-1"></a><span class="co">#&gt; $dim</span></span>
<span id="cb101-38"><a href="r-programming.html#cb101-38" tabindex="-1"></a><span class="co">#&gt; [1] 3 2 2</span></span>
<span id="cb101-39"><a href="r-programming.html#cb101-39" tabindex="-1"></a><span class="fu">class</span>(vec)</span>
<span id="cb101-40"><a href="r-programming.html#cb101-40" tabindex="-1"></a><span class="co">#&gt; [1] &quot;array&quot;</span></span></code></pre></div>
<p>Instead of modifying the attribute using the function <code>dim()</code>, you can simple use the functions <code>matrix()</code> or <code>array()</code>:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="r-programming.html#cb102-1" tabindex="-1"></a><span class="co"># Defining a matrix</span></span>
<span id="cb102-2"><a href="r-programming.html#cb102-2" tabindex="-1"></a>(mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">ncol =</span> <span class="dv">4</span>, <span class="at">nrow =</span> <span class="dv">3</span>))</span>
<span id="cb102-3"><a href="r-programming.html#cb102-3" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></span>
<span id="cb102-4"><a href="r-programming.html#cb102-4" tabindex="-1"></a><span class="co">#&gt; [1,]    1    4    7   10</span></span>
<span id="cb102-5"><a href="r-programming.html#cb102-5" tabindex="-1"></a><span class="co">#&gt; [2,]    2    5    8   11</span></span>
<span id="cb102-6"><a href="r-programming.html#cb102-6" tabindex="-1"></a><span class="co">#&gt; [3,]    3    6    9   12</span></span>
<span id="cb102-7"><a href="r-programming.html#cb102-7" tabindex="-1"></a><span class="fu">attributes</span>(mat)</span>
<span id="cb102-8"><a href="r-programming.html#cb102-8" tabindex="-1"></a><span class="co">#&gt; $dim</span></span>
<span id="cb102-9"><a href="r-programming.html#cb102-9" tabindex="-1"></a><span class="co">#&gt; [1] 3 4</span></span>
<span id="cb102-10"><a href="r-programming.html#cb102-10" tabindex="-1"></a><span class="fu">dim</span>(mat)</span>
<span id="cb102-11"><a href="r-programming.html#cb102-11" tabindex="-1"></a><span class="co">#&gt; [1] 3 4</span></span>
<span id="cb102-12"><a href="r-programming.html#cb102-12" tabindex="-1"></a></span>
<span id="cb102-13"><a href="r-programming.html#cb102-13" tabindex="-1"></a><span class="co"># Defining a 3-dimensional array</span></span>
<span id="cb102-14"><a href="r-programming.html#cb102-14" tabindex="-1"></a>(arry <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">2</span>)))</span>
<span id="cb102-15"><a href="r-programming.html#cb102-15" tabindex="-1"></a><span class="co">#&gt; , , 1</span></span>
<span id="cb102-16"><a href="r-programming.html#cb102-16" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb102-17"><a href="r-programming.html#cb102-17" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2]</span></span>
<span id="cb102-18"><a href="r-programming.html#cb102-18" tabindex="-1"></a><span class="co">#&gt; [1,]    1    4</span></span>
<span id="cb102-19"><a href="r-programming.html#cb102-19" tabindex="-1"></a><span class="co">#&gt; [2,]    2    5</span></span>
<span id="cb102-20"><a href="r-programming.html#cb102-20" tabindex="-1"></a><span class="co">#&gt; [3,]    3    6</span></span>
<span id="cb102-21"><a href="r-programming.html#cb102-21" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb102-22"><a href="r-programming.html#cb102-22" tabindex="-1"></a><span class="co">#&gt; , , 2</span></span>
<span id="cb102-23"><a href="r-programming.html#cb102-23" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb102-24"><a href="r-programming.html#cb102-24" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2]</span></span>
<span id="cb102-25"><a href="r-programming.html#cb102-25" tabindex="-1"></a><span class="co">#&gt; [1,]    7   10</span></span>
<span id="cb102-26"><a href="r-programming.html#cb102-26" tabindex="-1"></a><span class="co">#&gt; [2,]    8   11</span></span>
<span id="cb102-27"><a href="r-programming.html#cb102-27" tabindex="-1"></a><span class="co">#&gt; [3,]    9   12</span></span>
<span id="cb102-28"><a href="r-programming.html#cb102-28" tabindex="-1"></a><span class="fu">attributes</span>(arry)</span>
<span id="cb102-29"><a href="r-programming.html#cb102-29" tabindex="-1"></a><span class="co">#&gt; $dim</span></span>
<span id="cb102-30"><a href="r-programming.html#cb102-30" tabindex="-1"></a><span class="co">#&gt; [1] 3 2 2</span></span>
<span id="cb102-31"><a href="r-programming.html#cb102-31" tabindex="-1"></a><span class="fu">dim</span>(arry)</span>
<span id="cb102-32"><a href="r-programming.html#cb102-32" tabindex="-1"></a><span class="co">#&gt; [1] 3 2 2</span></span></code></pre></div>
<p>Data frames are similar to matrices in that they are two-dimensional structures. However, data frames are based on generic vectors, i.e. a data frame is a list of equal-length vectors.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="r-programming.html#cb103-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb103-2"><a href="r-programming.html#cb103-2" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">12.568</span>, <span class="fl">12.569</span>, <span class="fl">12.57</span>)</span>
<span id="cb103-3"><a href="r-programming.html#cb103-3" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb103-4"><a href="r-programming.html#cb103-4" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</span>
<span id="cb103-5"><a href="r-programming.html#cb103-5" tabindex="-1"></a></span>
<span id="cb103-6"><a href="r-programming.html#cb103-6" tabindex="-1"></a>(df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(a, b, y, z))</span>
<span id="cb103-7"><a href="r-programming.html#cb103-7" tabindex="-1"></a><span class="co">#&gt;   a      b     y z</span></span>
<span id="cb103-8"><a href="r-programming.html#cb103-8" tabindex="-1"></a><span class="co">#&gt; 1 1 12.568  TRUE a</span></span>
<span id="cb103-9"><a href="r-programming.html#cb103-9" tabindex="-1"></a><span class="co">#&gt; 2 2 12.569 FALSE b</span></span>
<span id="cb103-10"><a href="r-programming.html#cb103-10" tabindex="-1"></a><span class="co">#&gt; 3 3 12.570  TRUE c</span></span></code></pre></div>
<p>Because of their definition, data frames share properties of both the matrix and the list. For instance, the dimension of a data frame correspond to the dimension of a matrix (number of observations, i.e. the length of the atomic vectors, times the number of variables, i.e. the length of the list). But the length of a data frame is equal to the length of the list; not the total number of observations as for matrices:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="r-programming.html#cb104-1" tabindex="-1"></a><span class="fu">dim</span>(df)</span>
<span id="cb104-2"><a href="r-programming.html#cb104-2" tabindex="-1"></a><span class="co">#&gt; [1] 3 4</span></span>
<span id="cb104-3"><a href="r-programming.html#cb104-3" tabindex="-1"></a><span class="fu">length</span>(df)</span>
<span id="cb104-4"><a href="r-programming.html#cb104-4" tabindex="-1"></a><span class="co">#&gt; [1] 4</span></span></code></pre></div>
<p>Another important difference between matrices and data frames is that, per default, data frames have three attributes, whereas matrices only have one:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="r-programming.html#cb105-1" tabindex="-1"></a><span class="fu">attributes</span>(df)</span>
<span id="cb105-2"><a href="r-programming.html#cb105-2" tabindex="-1"></a><span class="co">#&gt; $names</span></span>
<span id="cb105-3"><a href="r-programming.html#cb105-3" tabindex="-1"></a><span class="co">#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;y&quot; &quot;z&quot;</span></span>
<span id="cb105-4"><a href="r-programming.html#cb105-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb105-5"><a href="r-programming.html#cb105-5" tabindex="-1"></a><span class="co">#&gt; $class</span></span>
<span id="cb105-6"><a href="r-programming.html#cb105-6" tabindex="-1"></a><span class="co">#&gt; [1] &quot;data.frame&quot;</span></span>
<span id="cb105-7"><a href="r-programming.html#cb105-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb105-8"><a href="r-programming.html#cb105-8" tabindex="-1"></a><span class="co">#&gt; $row.names</span></span>
<span id="cb105-9"><a href="r-programming.html#cb105-9" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3</span></span></code></pre></div>
<p>These attributes are</p>
<ul>
<li><code>names</code>, labelling the variables</li>
<li><code>class</code>, a vector of character strings giving the names of the classes which the object inherits from</li>
<li><code>row.names</code>, labelling the cases</li>
</ul>
<p>The <code>names</code> attribute labels the individual elements of a vector or list. You can name a vector in three ways:</p>
<ul>
<li>when creating it</li>
</ul>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="r-programming.html#cb106-1" tabindex="-1"></a>(a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">2</span>, <span class="at">c =</span> <span class="dv">3</span>))</span>
<span id="cb106-2"><a href="r-programming.html#cb106-2" tabindex="-1"></a><span class="co">#&gt; a b c </span></span>
<span id="cb106-3"><a href="r-programming.html#cb106-3" tabindex="-1"></a><span class="co">#&gt; 1 2 3</span></span></code></pre></div>
<ul>
<li>by modifying an existing vector’s <code>names</code> attribute using <code>names&lt;-</code></li>
</ul>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="r-programming.html#cb107-1" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb107-2"><a href="r-programming.html#cb107-2" tabindex="-1"></a><span class="fu">names</span>(b) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</span>
<span id="cb107-3"><a href="r-programming.html#cb107-3" tabindex="-1"></a>b</span>
<span id="cb107-4"><a href="r-programming.html#cb107-4" tabindex="-1"></a><span class="co">#&gt; a b c </span></span>
<span id="cb107-5"><a href="r-programming.html#cb107-5" tabindex="-1"></a><span class="co">#&gt; 1 2 3</span></span></code></pre></div>
<ul>
<li>or by creating a modified copy of a vector using <code>setNames</code></li>
</ul>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="r-programming.html#cb108-1" tabindex="-1"></a><span class="fu">setNames</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>))</span>
<span id="cb108-2"><a href="r-programming.html#cb108-2" tabindex="-1"></a><span class="co">#&gt; a b c </span></span>
<span id="cb108-3"><a href="r-programming.html#cb108-3" tabindex="-1"></a><span class="co">#&gt; 1 2 3</span></span></code></pre></div>
<p>The <code>class</code> attribute helps <code>R</code> to apply the correct function to an object. When a generic function (such as <code>summary()</code>) is applied to an object with a <code>class</code> attribute (for example <code>data.frame</code>) <code>R</code> tries to find the class-specific function (e.g. <code>summary.data.frame()</code>). A class-specific function is called method. If the class-specific function is available, it is applied to the object. If the class name does not produce a suitable function, the default function (e.g. <code>summary.default()</code>) is used.
Please note that an object can have many classes. In that case, <code>R</code> will go through all classes, one at a time, and use the first method that is available. For example, when applying a function <code>fct()</code> on the object <code>tbl</code> specified below, <code>R</code> will look for the function <code>fct.tbl_df()</code> first. If the function exists, it will be applied. If not, <code>R</code> will look for the function <code>fct.tbl()</code>. If <code>fct.tbl()</code> is defined, it will be applied to <code>tbl</code>. Otherwise, <code>R</code> will look for the function <code>fct.data.frame()</code>. If the function exists, it will be applied. If not, <code>R</code> will apply <code>fct.default()</code>.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="r-programming.html#cb109-1" tabindex="-1"></a>tbl <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(<span class="at">first =</span> <span class="st">&quot;James&quot;</span>, <span class="at">last =</span> <span class="st">&quot;Bond&quot;</span>)</span>
<span id="cb109-2"><a href="r-programming.html#cb109-2" tabindex="-1"></a><span class="fu">class</span>(tbl)</span>
<span id="cb109-3"><a href="r-programming.html#cb109-3" tabindex="-1"></a><span class="co">#&gt; [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</span></span></code></pre></div>
<p>If you want to find all methods that can be used on an object of a particular class, use <code>methods(class = [class])</code>, i.e.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="r-programming.html#cb110-1" tabindex="-1"></a><span class="fu">methods</span>(<span class="at">class =</span> <span class="st">&quot;data.frame&quot;</span>)</span>
<span id="cb110-2"><a href="r-programming.html#cb110-2" tabindex="-1"></a><span class="co">#&gt;  [1] $&lt;-           [             [[            [[&lt;-          [&lt;-           aggregate    </span></span>
<span id="cb110-3"><a href="r-programming.html#cb110-3" tabindex="-1"></a><span class="co">#&gt;  [7] anyDuplicated anyNA         as.data.frame as.list       as.matrix     as.vector    </span></span>
<span id="cb110-4"><a href="r-programming.html#cb110-4" tabindex="-1"></a><span class="co">#&gt; [13] by            cbind         coerce        dim           dimnames      dimnames&lt;-   </span></span>
<span id="cb110-5"><a href="r-programming.html#cb110-5" tabindex="-1"></a><span class="co">#&gt; [19] droplevels    duplicated    edit          filter        format        formula      </span></span>
<span id="cb110-6"><a href="r-programming.html#cb110-6" tabindex="-1"></a><span class="co">#&gt; [25] head          initialize    intersect     is.na         Math          merge        </span></span>
<span id="cb110-7"><a href="r-programming.html#cb110-7" tabindex="-1"></a><span class="co">#&gt; [31] na.exclude    na.omit       Ops           plot          print         prompt       </span></span>
<span id="cb110-8"><a href="r-programming.html#cb110-8" tabindex="-1"></a><span class="co">#&gt; [37] rbind         row.names     row.names&lt;-   rowsum        setdiff       setequal     </span></span>
<span id="cb110-9"><a href="r-programming.html#cb110-9" tabindex="-1"></a><span class="co">#&gt; [43] show          slotsFromS3   sort_by       split         split&lt;-       stack        </span></span>
<span id="cb110-10"><a href="r-programming.html#cb110-10" tabindex="-1"></a><span class="co">#&gt; [49] str           subset        summary       Summary       t             tail         </span></span>
<span id="cb110-11"><a href="r-programming.html#cb110-11" tabindex="-1"></a><span class="co">#&gt; [55] transform     type.convert  union         unique        unstack       within       </span></span>
<span id="cb110-12"><a href="r-programming.html#cb110-12" tabindex="-1"></a><span class="co">#&gt; [61] xtfrm        </span></span>
<span id="cb110-13"><a href="r-programming.html#cb110-13" tabindex="-1"></a><span class="co">#&gt; see &#39;?methods&#39; for accessing help and source code</span></span></code></pre></div>
<p>The <code>row.names</code> attribute is similar to the <code>names</code> attribute, but instead of labelling the variables it labels the observations/cases/rows.</p>
<p>Besides <code>dim</code>, <code>names</code>, <code>class</code>, and <code>row.names</code>, <code>R</code> also provides some other attributes that we will not discuss here.
We want to note, however, that you can define your own attributes using the function structure:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="r-programming.html#cb111-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">structure</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">my_own_attr =</span> <span class="st">&quot;Hello world!&quot;</span>)</span>
<span id="cb111-2"><a href="r-programming.html#cb111-2" tabindex="-1"></a><span class="fu">attributes</span>(x)</span>
<span id="cb111-3"><a href="r-programming.html#cb111-3" tabindex="-1"></a><span class="co">#&gt; $my_own_attr</span></span>
<span id="cb111-4"><a href="r-programming.html#cb111-4" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Hello world!&quot;</span></span></code></pre></div>
<p>If you simply want to define your own class, however, it is easier to use the function <code>class()</code> directly on the object:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="r-programming.html#cb112-1" tabindex="-1"></a>(agent007 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">first =</span> <span class="st">&quot;James&quot;</span>, <span class="at">last =</span> <span class="st">&quot;Bond&quot;</span>))</span>
<span id="cb112-2"><a href="r-programming.html#cb112-2" tabindex="-1"></a><span class="co">#&gt; $first</span></span>
<span id="cb112-3"><a href="r-programming.html#cb112-3" tabindex="-1"></a><span class="co">#&gt; [1] &quot;James&quot;</span></span>
<span id="cb112-4"><a href="r-programming.html#cb112-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb112-5"><a href="r-programming.html#cb112-5" tabindex="-1"></a><span class="co">#&gt; $last</span></span>
<span id="cb112-6"><a href="r-programming.html#cb112-6" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Bond&quot;</span></span>
<span id="cb112-7"><a href="r-programming.html#cb112-7" tabindex="-1"></a><span class="fu">class</span>(agent007) <span class="ot">&lt;-</span> <span class="st">&quot;Person&quot;</span></span>
<span id="cb112-8"><a href="r-programming.html#cb112-8" tabindex="-1"></a></span>
<span id="cb112-9"><a href="r-programming.html#cb112-9" tabindex="-1"></a><span class="fu">attr</span>(agent007, <span class="st">&quot;class&quot;</span>)</span>
<span id="cb112-10"><a href="r-programming.html#cb112-10" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Person&quot;</span></span></code></pre></div>
<p>Once you have created your own class, you can define class-specific functions as described above. A class-specific function is simply a function called <code>&lt;method_name&gt;.&lt;class_name&gt;()</code> For the object <code>agent007</code> of class <code>Person</code>, we may want to define a special <code>print</code>function:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="r-programming.html#cb113-1" tabindex="-1"></a>print.Person <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb113-2"><a href="r-programming.html#cb113-2" tabindex="-1"></a>  <span class="fu">print</span>(glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">&quot;My name is {x$last}, {x$first} {x$last}.&quot;</span>))</span>
<span id="cb113-3"><a href="r-programming.html#cb113-3" tabindex="-1"></a>  <span class="fu">invisible</span>(x)</span>
<span id="cb113-4"><a href="r-programming.html#cb113-4" tabindex="-1"></a>}</span>
<span id="cb113-5"><a href="r-programming.html#cb113-5" tabindex="-1"></a></span>
<span id="cb113-6"><a href="r-programming.html#cb113-6" tabindex="-1"></a>agent007</span>
<span id="cb113-7"><a href="r-programming.html#cb113-7" tabindex="-1"></a><span class="co">#&gt; My name is Bond, James Bond.</span></span></code></pre></div>
<p>Once the method has been defined, each object of class <code>Person</code> will be printed in that way (unless we specifically ask <code>R</code> to use the default method):</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="r-programming.html#cb114-1" tabindex="-1"></a>(me <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">first =</span> <span class="st">&quot;Florian&quot;</span>, <span class="at">last =</span> <span class="st">&quot;Privé&quot;</span>))</span>
<span id="cb114-2"><a href="r-programming.html#cb114-2" tabindex="-1"></a><span class="co">#&gt; $first</span></span>
<span id="cb114-3"><a href="r-programming.html#cb114-3" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Florian&quot;</span></span>
<span id="cb114-4"><a href="r-programming.html#cb114-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb114-5"><a href="r-programming.html#cb114-5" tabindex="-1"></a><span class="co">#&gt; $last</span></span>
<span id="cb114-6"><a href="r-programming.html#cb114-6" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Privé&quot;</span></span>
<span id="cb114-7"><a href="r-programming.html#cb114-7" tabindex="-1"></a><span class="fu">class</span>(me) <span class="ot">&lt;-</span> <span class="st">&quot;Person&quot;</span></span>
<span id="cb114-8"><a href="r-programming.html#cb114-8" tabindex="-1"></a></span>
<span id="cb114-9"><a href="r-programming.html#cb114-9" tabindex="-1"></a>me</span>
<span id="cb114-10"><a href="r-programming.html#cb114-10" tabindex="-1"></a><span class="co">#&gt; My name is Privé, Florian Privé.</span></span>
<span id="cb114-11"><a href="r-programming.html#cb114-11" tabindex="-1"></a><span class="fu">print.default</span>(me)</span>
<span id="cb114-12"><a href="r-programming.html#cb114-12" tabindex="-1"></a><span class="co">#&gt; $first</span></span>
<span id="cb114-13"><a href="r-programming.html#cb114-13" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Florian&quot;</span></span>
<span id="cb114-14"><a href="r-programming.html#cb114-14" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb114-15"><a href="r-programming.html#cb114-15" tabindex="-1"></a><span class="co">#&gt; $last</span></span>
<span id="cb114-16"><a href="r-programming.html#cb114-16" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Privé&quot;</span></span>
<span id="cb114-17"><a href="r-programming.html#cb114-17" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb114-18"><a href="r-programming.html#cb114-18" tabindex="-1"></a><span class="co">#&gt; attr(,&quot;class&quot;)</span></span>
<span id="cb114-19"><a href="r-programming.html#cb114-19" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Person&quot;</span></span></code></pre></div>
<p>In most cases, you should not simply remove an attribute from an object, unless you know what you are doing. Otherwise you may end up with very strange results. For example, if you remove the attribute <code>levels</code> from a factor, <code>R</code> will no longer be able to perform simple operations on that factor:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="r-programming.html#cb115-1" tabindex="-1"></a>(x <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>), <span class="dv">12</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>))</span>
<span id="cb115-2"><a href="r-programming.html#cb115-2" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;b&quot; &quot;b&quot; &quot;a&quot; &quot;c&quot; &quot;a&quot; &quot;c&quot; &quot;b&quot; &quot;a&quot; &quot;b&quot; &quot;b&quot; &quot;c&quot; &quot;b&quot;</span></span>
<span id="cb115-3"><a href="r-programming.html#cb115-3" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">factor</span>(x)</span>
<span id="cb115-4"><a href="r-programming.html#cb115-4" tabindex="-1"></a><span class="fu">attributes</span>(y)</span>
<span id="cb115-5"><a href="r-programming.html#cb115-5" tabindex="-1"></a><span class="co">#&gt; $levels</span></span>
<span id="cb115-6"><a href="r-programming.html#cb115-6" tabindex="-1"></a><span class="co">#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></span>
<span id="cb115-7"><a href="r-programming.html#cb115-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb115-8"><a href="r-programming.html#cb115-8" tabindex="-1"></a><span class="co">#&gt; $class</span></span>
<span id="cb115-9"><a href="r-programming.html#cb115-9" tabindex="-1"></a><span class="co">#&gt; [1] &quot;factor&quot;</span></span>
<span id="cb115-10"><a href="r-programming.html#cb115-10" tabindex="-1"></a></span>
<span id="cb115-11"><a href="r-programming.html#cb115-11" tabindex="-1"></a><span class="fu">attr</span>(y, <span class="st">&quot;levels&quot;</span>) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb115-12"><a href="r-programming.html#cb115-12" tabindex="-1"></a>y</span>
<span id="cb115-13"><a href="r-programming.html#cb115-13" tabindex="-1"></a><span class="co">#&gt; Error in as.character.factor(x): malformed factor</span></span></code></pre></div>
<p>And if you remove the attribute <code>class</code>, the factor is turned into an atomic vector</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="r-programming.html#cb116-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">factor</span>(x)</span>
<span id="cb116-2"><a href="r-programming.html#cb116-2" tabindex="-1"></a><span class="fu">attributes</span>(y)</span>
<span id="cb116-3"><a href="r-programming.html#cb116-3" tabindex="-1"></a><span class="co">#&gt; $levels</span></span>
<span id="cb116-4"><a href="r-programming.html#cb116-4" tabindex="-1"></a><span class="co">#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></span>
<span id="cb116-5"><a href="r-programming.html#cb116-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb116-6"><a href="r-programming.html#cb116-6" tabindex="-1"></a><span class="co">#&gt; $class</span></span>
<span id="cb116-7"><a href="r-programming.html#cb116-7" tabindex="-1"></a><span class="co">#&gt; [1] &quot;factor&quot;</span></span>
<span id="cb116-8"><a href="r-programming.html#cb116-8" tabindex="-1"></a></span>
<span id="cb116-9"><a href="r-programming.html#cb116-9" tabindex="-1"></a><span class="fu">unclass</span>(y)</span>
<span id="cb116-10"><a href="r-programming.html#cb116-10" tabindex="-1"></a><span class="co">#&gt;  [1] 2 2 1 3 1 3 2 1 2 2 3 2</span></span>
<span id="cb116-11"><a href="r-programming.html#cb116-11" tabindex="-1"></a><span class="co">#&gt; attr(,&quot;levels&quot;)</span></span>
<span id="cb116-12"><a href="r-programming.html#cb116-12" tabindex="-1"></a><span class="co">#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></span></code></pre></div>
<p>If you remove the only attribute (<code>class</code>) from a date vector, the result is a numeric vector representing the number of days since 1970-01-01</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="r-programming.html#cb117-1" tabindex="-1"></a>(today <span class="ot">&lt;-</span> <span class="fu">Sys.Date</span>())</span>
<span id="cb117-2"><a href="r-programming.html#cb117-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2024-08-21&quot;</span></span>
<span id="cb117-3"><a href="r-programming.html#cb117-3" tabindex="-1"></a><span class="fu">attributes</span>(today)</span>
<span id="cb117-4"><a href="r-programming.html#cb117-4" tabindex="-1"></a><span class="co">#&gt; $class</span></span>
<span id="cb117-5"><a href="r-programming.html#cb117-5" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Date&quot;</span></span>
<span id="cb117-6"><a href="r-programming.html#cb117-6" tabindex="-1"></a><span class="fu">unclass</span>(today)</span>
<span id="cb117-7"><a href="r-programming.html#cb117-7" tabindex="-1"></a><span class="co">#&gt; [1] 19956</span></span></code></pre></div>
<div id="exercise-1" class="section level4 unnumbered hasAnchor">
<h4>Exercise<a href="r-programming.html#exercise-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li>Define a simple function that takes two arguments (first_name and last_name) and that returns an object of class “Person”.</li>
</ol>
</div>
</div>
<div id="accessors" class="section level3 hasAnchor" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Accessors<a href="r-programming.html#accessors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In the previous section, we have seen how we can adding attributes to vectors in order to obtain other important data structures like matrices, arrays, and data frames. Furthermore, we mentioned that two-dimensional matrices and multi-dimensional arrays are based on atomic vectors, while data frames are obtained from generic vectors/lists.
We will now see that the choice of vector type (atomic vs. generic) has an effect on the accessibility of elements.</p>
<p>For two-dimensional matrices, multi-dimensional arrays and data frames, elements can be accessed in different ways.</p>
<p>Data frames can be subsetted like a one-dimensional structure (where it behaves like a list), or a two-dimensional structure (where it behaves like a matrix).</p>
<ol style="list-style-type: decimal">
<li><p>The <code>[</code> accessor can be used on vectors, matrices, arrays, lists and data frames to extract or replace subsets of the data <strong>with the same class</strong>.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="r-programming.html#cb118-1" tabindex="-1"></a>(x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb118-2"><a href="r-programming.html#cb118-2" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4 5</span></span>
<span id="cb118-3"><a href="r-programming.html#cb118-3" tabindex="-1"></a>x[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb118-4"><a href="r-programming.html#cb118-4" tabindex="-1"></a><span class="co">#&gt; [1] 2 3</span></span>
<span id="cb118-5"><a href="r-programming.html#cb118-5" tabindex="-1"></a>x[<span class="dv">2</span><span class="sc">:</span><span class="dv">8</span>]</span>
<span id="cb118-6"><a href="r-programming.html#cb118-6" tabindex="-1"></a><span class="co">#&gt; [1]  2  3  4  5 NA NA NA</span></span>
<span id="cb118-7"><a href="r-programming.html#cb118-7" tabindex="-1"></a></span>
<span id="cb118-8"><a href="r-programming.html#cb118-8" tabindex="-1"></a>(y <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">3</span>))</span>
<span id="cb118-9"><a href="r-programming.html#cb118-9" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></span>
<span id="cb118-10"><a href="r-programming.html#cb118-10" tabindex="-1"></a><span class="co">#&gt; [1,]    1    4    7   10</span></span>
<span id="cb118-11"><a href="r-programming.html#cb118-11" tabindex="-1"></a><span class="co">#&gt; [2,]    2    5    8   11</span></span>
<span id="cb118-12"><a href="r-programming.html#cb118-12" tabindex="-1"></a><span class="co">#&gt; [3,]    3    6    9   12</span></span>
<span id="cb118-13"><a href="r-programming.html#cb118-13" tabindex="-1"></a>y[<span class="dv">4</span><span class="sc">:</span><span class="dv">9</span>]</span>
<span id="cb118-14"><a href="r-programming.html#cb118-14" tabindex="-1"></a><span class="co">#&gt; [1] 4 5 6 7 8 9</span></span>
<span id="cb118-15"><a href="r-programming.html#cb118-15" tabindex="-1"></a></span>
<span id="cb118-16"><a href="r-programming.html#cb118-16" tabindex="-1"></a>(l <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">b =</span> <span class="st">&quot;toto&quot;</span>, <span class="at">c =</span> <span class="fu">runif</span>(<span class="dv">10</span>)))</span>
<span id="cb118-17"><a href="r-programming.html#cb118-17" tabindex="-1"></a><span class="co">#&gt; $a</span></span>
<span id="cb118-18"><a href="r-programming.html#cb118-18" tabindex="-1"></a><span class="co">#&gt; [1] 2 3</span></span>
<span id="cb118-19"><a href="r-programming.html#cb118-19" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb118-20"><a href="r-programming.html#cb118-20" tabindex="-1"></a><span class="co">#&gt; $b</span></span>
<span id="cb118-21"><a href="r-programming.html#cb118-21" tabindex="-1"></a><span class="co">#&gt; [1] &quot;toto&quot;</span></span>
<span id="cb118-22"><a href="r-programming.html#cb118-22" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb118-23"><a href="r-programming.html#cb118-23" tabindex="-1"></a><span class="co">#&gt; $c</span></span>
<span id="cb118-24"><a href="r-programming.html#cb118-24" tabindex="-1"></a><span class="co">#&gt;  [1] 0.664580411 0.917853037 0.131289158 0.880099960 0.713364926 0.481320657 0.558787325</span></span>
<span id="cb118-25"><a href="r-programming.html#cb118-25" tabindex="-1"></a><span class="co">#&gt;  [8] 0.003776938 0.255363885 0.991235470</span></span>
<span id="cb118-26"><a href="r-programming.html#cb118-26" tabindex="-1"></a>l[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb118-27"><a href="r-programming.html#cb118-27" tabindex="-1"></a><span class="co">#&gt; $b</span></span>
<span id="cb118-28"><a href="r-programming.html#cb118-28" tabindex="-1"></a><span class="co">#&gt; [1] &quot;toto&quot;</span></span>
<span id="cb118-29"><a href="r-programming.html#cb118-29" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb118-30"><a href="r-programming.html#cb118-30" tabindex="-1"></a><span class="co">#&gt; $c</span></span>
<span id="cb118-31"><a href="r-programming.html#cb118-31" tabindex="-1"></a><span class="co">#&gt;  [1] 0.664580411 0.917853037 0.131289158 0.880099960 0.713364926 0.481320657 0.558787325</span></span>
<span id="cb118-32"><a href="r-programming.html#cb118-32" tabindex="-1"></a><span class="co">#&gt;  [8] 0.003776938 0.255363885 0.991235470</span></span></code></pre></div>
<p>What does <em>with the same class</em> mean? It means that the class of the resulting subset is the same as the object that was subsetted with <code>[</code>. That means, when you subset a vector with the <code>[</code> accessor, the subset is a vector as well. When you subset a list with the <code>[</code> accessor, the result is a list: Even if you only select a single entry of the list.</p>
<p>The index object can be numeric, logical, character, or empty:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="r-programming.html#cb119-1" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)]</span>
<span id="cb119-2"><a href="r-programming.html#cb119-2" tabindex="-1"></a><span class="co">#&gt; [1] 2 4</span></span>
<span id="cb119-3"><a href="r-programming.html#cb119-3" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>)]</span>
<span id="cb119-4"><a href="r-programming.html#cb119-4" tabindex="-1"></a><span class="co">#&gt; [1] 2 4</span></span>
<span id="cb119-5"><a href="r-programming.html#cb119-5" tabindex="-1"></a></span>
<span id="cb119-6"><a href="r-programming.html#cb119-6" tabindex="-1"></a>y[]</span>
<span id="cb119-7"><a href="r-programming.html#cb119-7" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></span>
<span id="cb119-8"><a href="r-programming.html#cb119-8" tabindex="-1"></a><span class="co">#&gt; [1,]    1    4    7   10</span></span>
<span id="cb119-9"><a href="r-programming.html#cb119-9" tabindex="-1"></a><span class="co">#&gt; [2,]    2    5    8   11</span></span>
<span id="cb119-10"><a href="r-programming.html#cb119-10" tabindex="-1"></a><span class="co">#&gt; [3,]    3    6    9   12</span></span>
<span id="cb119-11"><a href="r-programming.html#cb119-11" tabindex="-1"></a></span>
<span id="cb119-12"><a href="r-programming.html#cb119-12" tabindex="-1"></a>l[<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;c&quot;</span>)]</span>
<span id="cb119-13"><a href="r-programming.html#cb119-13" tabindex="-1"></a><span class="co">#&gt; $a</span></span>
<span id="cb119-14"><a href="r-programming.html#cb119-14" tabindex="-1"></a><span class="co">#&gt; [1] 2 3</span></span>
<span id="cb119-15"><a href="r-programming.html#cb119-15" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb119-16"><a href="r-programming.html#cb119-16" tabindex="-1"></a><span class="co">#&gt; $c</span></span>
<span id="cb119-17"><a href="r-programming.html#cb119-17" tabindex="-1"></a><span class="co">#&gt;  [1] 0.664580411 0.917853037 0.131289158 0.880099960 0.713364926 0.481320657 0.558787325</span></span>
<span id="cb119-18"><a href="r-programming.html#cb119-18" tabindex="-1"></a><span class="co">#&gt;  [8] 0.003776938 0.255363885 0.991235470</span></span>
<span id="cb119-19"><a href="r-programming.html#cb119-19" tabindex="-1"></a>l[<span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>)]</span>
<span id="cb119-20"><a href="r-programming.html#cb119-20" tabindex="-1"></a><span class="co">#&gt; $b</span></span>
<span id="cb119-21"><a href="r-programming.html#cb119-21" tabindex="-1"></a><span class="co">#&gt; [1] &quot;toto&quot;</span></span></code></pre></div>
<p>Besides using a single vector to subset matrices, arrays and data frames, you can also specify several indices to <code>[</code> to obtain two-dimensional subsets. An empty index indicates that all entries in that dimension are selected:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="r-programming.html#cb120-1" tabindex="-1"></a>y[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb120-2"><a href="r-programming.html#cb120-2" tabindex="-1"></a><span class="co">#&gt; [1] 2 3</span></span>
<span id="cb120-3"><a href="r-programming.html#cb120-3" tabindex="-1"></a>y[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, ]</span>
<span id="cb120-4"><a href="r-programming.html#cb120-4" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></span>
<span id="cb120-5"><a href="r-programming.html#cb120-5" tabindex="-1"></a><span class="co">#&gt; [1,]    2    5    8   11</span></span>
<span id="cb120-6"><a href="r-programming.html#cb120-6" tabindex="-1"></a><span class="co">#&gt; [2,]    3    6    9   12</span></span>
<span id="cb120-7"><a href="r-programming.html#cb120-7" tabindex="-1"></a>y[, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb120-8"><a href="r-programming.html#cb120-8" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2]</span></span>
<span id="cb120-9"><a href="r-programming.html#cb120-9" tabindex="-1"></a><span class="co">#&gt; [1,]    4    7</span></span>
<span id="cb120-10"><a href="r-programming.html#cb120-10" tabindex="-1"></a><span class="co">#&gt; [2,]    5    8</span></span>
<span id="cb120-11"><a href="r-programming.html#cb120-11" tabindex="-1"></a><span class="co">#&gt; [3,]    6    9</span></span>
<span id="cb120-12"><a href="r-programming.html#cb120-12" tabindex="-1"></a>y[<span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb120-13"><a href="r-programming.html#cb120-13" tabindex="-1"></a><span class="co">#&gt; [1] 8</span></span></code></pre></div>
<p>Matrices and arrays can also be indexed via a numeric matrix with one column for each dimension. Each row of the index matrix then selects a single element of the array:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="r-programming.html#cb121-1" tabindex="-1"></a>two_col_ind <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">2</span>))</span>
<span id="cb121-2"><a href="r-programming.html#cb121-2" tabindex="-1"></a>y[two_col_ind]</span>
<span id="cb121-3"><a href="r-programming.html#cb121-3" tabindex="-1"></a><span class="co">#&gt; [1]  1 12  5</span></span></code></pre></div></li>
<li><p>The <code>[[</code> and the <code>$</code> accessor are both operators to access or replace <strong>a single element</strong>. However, while <code>[[</code> can be used on vectors, matrices, arrays, lists and data frames, the <code>$</code> accessor does only work on lists and data frames.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="r-programming.html#cb122-1" tabindex="-1"></a>x[[<span class="dv">3</span>]]</span>
<span id="cb122-2"><a href="r-programming.html#cb122-2" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span>
<span id="cb122-3"><a href="r-programming.html#cb122-3" tabindex="-1"></a>l[[<span class="dv">2</span>]]</span>
<span id="cb122-4"><a href="r-programming.html#cb122-4" tabindex="-1"></a><span class="co">#&gt; [1] &quot;toto&quot;</span></span>
<span id="cb122-5"><a href="r-programming.html#cb122-5" tabindex="-1"></a>l[[<span class="st">&quot;c&quot;</span>]]</span>
<span id="cb122-6"><a href="r-programming.html#cb122-6" tabindex="-1"></a><span class="co">#&gt;  [1] 0.664580411 0.917853037 0.131289158 0.880099960 0.713364926 0.481320657 0.558787325</span></span>
<span id="cb122-7"><a href="r-programming.html#cb122-7" tabindex="-1"></a><span class="co">#&gt;  [8] 0.003776938 0.255363885 0.991235470</span></span>
<span id="cb122-8"><a href="r-programming.html#cb122-8" tabindex="-1"></a>l<span class="sc">$</span>c</span>
<span id="cb122-9"><a href="r-programming.html#cb122-9" tabindex="-1"></a><span class="co">#&gt;  [1] 0.664580411 0.917853037 0.131289158 0.880099960 0.713364926 0.481320657 0.558787325</span></span>
<span id="cb122-10"><a href="r-programming.html#cb122-10" tabindex="-1"></a><span class="co">#&gt;  [8] 0.003776938 0.255363885 0.991235470</span></span>
<span id="cb122-11"><a href="r-programming.html#cb122-11" tabindex="-1"></a></span>
<span id="cb122-12"><a href="r-programming.html#cb122-12" tabindex="-1"></a><span class="fu">names</span>(x) <span class="ot">&lt;-</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb122-13"><a href="r-programming.html#cb122-13" tabindex="-1"></a>x</span>
<span id="cb122-14"><a href="r-programming.html#cb122-14" tabindex="-1"></a><span class="co">#&gt; a b c d e </span></span>
<span id="cb122-15"><a href="r-programming.html#cb122-15" tabindex="-1"></a><span class="co">#&gt; 1 2 3 4 5</span></span>
<span id="cb122-16"><a href="r-programming.html#cb122-16" tabindex="-1"></a>x<span class="sc">$</span>e</span>
<span id="cb122-17"><a href="r-programming.html#cb122-17" tabindex="-1"></a><span class="co">#&gt; Error in x$e: $ operator is invalid for atomic vectors</span></span></code></pre></div>
<p>You can see that for the atomic vector <code>x</code>, <code>x[3]</code> and <code>x[[3]]</code> result in the same output; a vector of length one. But for the list <code>l</code>, the <code>[</code> accessor returns a list with one entry, while <code>[[</code> returns a matrix. You can think of a list as a pepper pot, each entry of the list being a sachet of pepper. The <code>[</code> accessor extracts the desired sachets, but they are still contained within the pot. The <code>[[</code> accessor takes the desired sachets out of the pot.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-103"></span>
<img src="https://pbs.twimg.com/media/DQ5en8XWAAICIaJ.jpg" alt="Indexing lists in R. [Source: https://goo.gl/8UkcHq]" width="70%" />
<p class="caption">
Figure 3.1: Indexing lists in R. [Source: <a href="https://goo.gl/8UkcHq" class="uri">https://goo.gl/8UkcHq</a>]
</p>
</div>
<p>Besides the fact that the <code>$</code> accessor cannot be used on atomic vectors, matrices or arrays, the main difference between <code>[[</code> and <code>$</code> is that <code>$</code> does not allow computed indices:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="r-programming.html#cb123-1" tabindex="-1"></a>l[[<span class="dv">2</span> <span class="sc">-</span> <span class="dv">1</span>]]</span>
<span id="cb123-2"><a href="r-programming.html#cb123-2" tabindex="-1"></a>l<span class="sc">$</span>(<span class="dv">2-1</span>)</span>
<span id="cb123-3"><a href="r-programming.html#cb123-3" tabindex="-1"></a><span class="co">#&gt; Error: &lt;text&gt;:2:3: unexpected &#39;(&#39;</span></span>
<span id="cb123-4"><a href="r-programming.html#cb123-4" tabindex="-1"></a><span class="co">#&gt; 1: l[[2 - 1]]</span></span>
<span id="cb123-5"><a href="r-programming.html#cb123-5" tabindex="-1"></a><span class="co">#&gt; 2: l$(</span></span>
<span id="cb123-6"><a href="r-programming.html#cb123-6" tabindex="-1"></a><span class="co">#&gt;      ^</span></span></code></pre></div></li>
</ol>
<p>Before we move on to some exercises, we have two more comments.</p>
<ol style="list-style-type: decimal">
<li><p>Per default, the <code>[[</code> accessor only extracts columns if their column names match one of the strings provided in a character vector exactly. That means, if you want to extract a list entry named <code>aaakv</code> using <code>[[a]]</code>, the result will be <code>NULL</code>:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="r-programming.html#cb124-1" tabindex="-1"></a><span class="fu">names</span>(l) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;aaakv&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</span>
<span id="cb124-2"><a href="r-programming.html#cb124-2" tabindex="-1"></a>l</span>
<span id="cb124-3"><a href="r-programming.html#cb124-3" tabindex="-1"></a><span class="co">#&gt; $aaakv</span></span>
<span id="cb124-4"><a href="r-programming.html#cb124-4" tabindex="-1"></a><span class="co">#&gt; [1] 2 3</span></span>
<span id="cb124-5"><a href="r-programming.html#cb124-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb124-6"><a href="r-programming.html#cb124-6" tabindex="-1"></a><span class="co">#&gt; $b</span></span>
<span id="cb124-7"><a href="r-programming.html#cb124-7" tabindex="-1"></a><span class="co">#&gt; [1] &quot;toto&quot;</span></span>
<span id="cb124-8"><a href="r-programming.html#cb124-8" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb124-9"><a href="r-programming.html#cb124-9" tabindex="-1"></a><span class="co">#&gt; $c</span></span>
<span id="cb124-10"><a href="r-programming.html#cb124-10" tabindex="-1"></a><span class="co">#&gt;  [1] 0.664580411 0.917853037 0.131289158 0.880099960 0.713364926 0.481320657 0.558787325</span></span>
<span id="cb124-11"><a href="r-programming.html#cb124-11" tabindex="-1"></a><span class="co">#&gt;  [8] 0.003776938 0.255363885 0.991235470</span></span>
<span id="cb124-12"><a href="r-programming.html#cb124-12" tabindex="-1"></a></span>
<span id="cb124-13"><a href="r-programming.html#cb124-13" tabindex="-1"></a>l<span class="sc">$</span>a</span>
<span id="cb124-14"><a href="r-programming.html#cb124-14" tabindex="-1"></a><span class="co">#&gt; [1] 2 3</span></span>
<span id="cb124-15"><a href="r-programming.html#cb124-15" tabindex="-1"></a>l[[<span class="st">&quot;a&quot;</span>]]</span>
<span id="cb124-16"><a href="r-programming.html#cb124-16" tabindex="-1"></a><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>To allow for partial matching, use <code>exact = FALSE</code>:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="r-programming.html#cb125-1" tabindex="-1"></a>l[[<span class="st">&quot;a&quot;</span>, exact <span class="ot">=</span> <span class="cn">FALSE</span>]]</span>
<span id="cb125-2"><a href="r-programming.html#cb125-2" tabindex="-1"></a><span class="co">#&gt; [1] 2 3</span></span></code></pre></div></li>
<li><p>Per default, the <code>[</code> accessor coerces the result to the lowest possible dimension. For example, if you extract a single row from a matrix using <code>[</code>, the result will be a vector:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="r-programming.html#cb126-1" tabindex="-1"></a>y</span>
<span id="cb126-2"><a href="r-programming.html#cb126-2" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></span>
<span id="cb126-3"><a href="r-programming.html#cb126-3" tabindex="-1"></a><span class="co">#&gt; [1,]    1    4    7   10</span></span>
<span id="cb126-4"><a href="r-programming.html#cb126-4" tabindex="-1"></a><span class="co">#&gt; [2,]    2    5    8   11</span></span>
<span id="cb126-5"><a href="r-programming.html#cb126-5" tabindex="-1"></a><span class="co">#&gt; [3,]    3    6    9   12</span></span>
<span id="cb126-6"><a href="r-programming.html#cb126-6" tabindex="-1"></a>y[<span class="dv">1</span>, ]</span>
<span id="cb126-7"><a href="r-programming.html#cb126-7" tabindex="-1"></a><span class="co">#&gt; [1]  1  4  7 10</span></span></code></pre></div>
<p>To change this behavior, set <code>drop = FALSE</code></p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="r-programming.html#cb127-1" tabindex="-1"></a>y[<span class="dv">1</span>, , drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span>
<span id="cb127-2"><a href="r-programming.html#cb127-2" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></span>
<span id="cb127-3"><a href="r-programming.html#cb127-3" tabindex="-1"></a><span class="co">#&gt; [1,]    1    4    7   10</span></span></code></pre></div></li>
</ol>
</div>
<div id="exercises-2" class="section level3 unnumbered hasAnchor">
<h3>Exercises<a href="r-programming.html#exercises-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>In which order are matrix elements stored?</p></li>
<li><p>Use the dimension attribute to make a function that computes the sum of every n successive elements of a vector. <br>
Ex: 1 2 3 4 5 6 7 8 9 10 -&gt; expected outcome: 3 7 11 15 19<br>
[Which are the special cases that you should consider?]</p></li>
<li><p>Compute the means of every numeric column of the dataset <code>iris</code>. Expected result:</p>
<pre><code>#&gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
#&gt;     5.843333     3.057333     3.758000     1.199333</code></pre></li>
<li><p>Convert the following matrix to a vector by using this replacement rule for rows:<br>
(0, 0) -&gt; 0<br>
(0, 1) -&gt; 1<br>
(1, 1) -&gt; 2<br>
(1, 0) -&gt; NA<br></p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="r-programming.html#cb129-1" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">2</span>)</span>
<span id="cb129-2"><a href="r-programming.html#cb129-2" tabindex="-1"></a>mat[<span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">12</span>, <span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">19</span>)] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb129-3"><a href="r-programming.html#cb129-3" tabindex="-1"></a>mat</span>
<span id="cb129-4"><a href="r-programming.html#cb129-4" tabindex="-1"></a><span class="co">#&gt;       [,1] [,2]</span></span>
<span id="cb129-5"><a href="r-programming.html#cb129-5" tabindex="-1"></a><span class="co">#&gt;  [1,]    0    0</span></span>
<span id="cb129-6"><a href="r-programming.html#cb129-6" tabindex="-1"></a><span class="co">#&gt;  [2,]    0    1</span></span>
<span id="cb129-7"><a href="r-programming.html#cb129-7" tabindex="-1"></a><span class="co">#&gt;  [3,]    0    0</span></span>
<span id="cb129-8"><a href="r-programming.html#cb129-8" tabindex="-1"></a><span class="co">#&gt;  [4,]    0    0</span></span>
<span id="cb129-9"><a href="r-programming.html#cb129-9" tabindex="-1"></a><span class="co">#&gt;  [5,]    1    1</span></span>
<span id="cb129-10"><a href="r-programming.html#cb129-10" tabindex="-1"></a><span class="co">#&gt;  [6,]    0    1</span></span>
<span id="cb129-11"><a href="r-programming.html#cb129-11" tabindex="-1"></a><span class="co">#&gt;  [7,]    0    1</span></span>
<span id="cb129-12"><a href="r-programming.html#cb129-12" tabindex="-1"></a><span class="co">#&gt;  [8,]    1    0</span></span>
<span id="cb129-13"><a href="r-programming.html#cb129-13" tabindex="-1"></a><span class="co">#&gt;  [9,]    1    1</span></span>
<span id="cb129-14"><a href="r-programming.html#cb129-14" tabindex="-1"></a><span class="co">#&gt; [10,]    0    0</span></span></code></pre></div>
<p>You have to use the following matrix to do so:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="r-programming.html#cb130-1" tabindex="-1"></a>(decode <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="cn">NA</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="dv">2</span>))</span>
<span id="cb130-2"><a href="r-programming.html#cb130-2" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2]</span></span>
<span id="cb130-3"><a href="r-programming.html#cb130-3" tabindex="-1"></a><span class="co">#&gt; [1,]    0    1</span></span>
<span id="cb130-4"><a href="r-programming.html#cb130-4" tabindex="-1"></a><span class="co">#&gt; [2,]   NA    2</span></span></code></pre></div>
<p>Start by doing it for one row, then by using <code>apply()</code>. Finally, replace it by a special accessor.
Expected result:</p>
<pre><code>#&gt;  [1]  0  1  0  0  2  1  1 NA  2  0</code></pre></li>
</ol>
</div>
</div>
<div id="environments-and-scoping" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Environments and scoping<a href="r-programming.html#environments-and-scoping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The final section of this chapter is about environments and scoping. These concepts may be confusing in the beginning; if you are still puzzled about environments and scoping at the end of this section, don’t get frustrated. We will provide some references to other materials that you can read at the end of this section.</p>
<p>Let us dive right into it: <br>
Environments associate a set of names with a set of values. You can think of an environment as a list, but with four important exceptions:</p>
<ol style="list-style-type: decimal">
<li>Every name in an environment is unique.</li>
<li>The names in an environment are not ordered.</li>
<li>Every environment has a parent environment.</li>
<li>Environments have reference semantics.</li>
</ol>
<p>Let us take a closer look at exception 3: <em>Every environment has a parent environment</em>. <br>
One environment doesn’t follow that rule: the <em>empty</em> environment. The empty environment is the ultimate ancestor of all other environments. All other environments have parents. Most environments have grandparents (the parent’s parent), and the ancestors of an environment include all parent environments up to the empty environment. When <code>R</code> is looking for a variable, it will start looking for that variable inside the current environment. If <code>R</code> cannot find the variable in the current environment, it will look in the parent environment. If the variable doesn’t exist in the parent environment either, <code>R</code> will look in the parent environment of the parent, and so on. Let us consider an example to make this point clearer.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="r-programming.html#cb132-1" tabindex="-1"></a>h <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb132-2"><a href="r-programming.html#cb132-2" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb132-3"><a href="r-programming.html#cb132-3" tabindex="-1"></a>  f <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb132-4"><a href="r-programming.html#cb132-4" tabindex="-1"></a>    x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb132-5"><a href="r-programming.html#cb132-5" tabindex="-1"></a>  }</span>
<span id="cb132-6"><a href="r-programming.html#cb132-6" tabindex="-1"></a>  <span class="fu">f</span>()</span>
<span id="cb132-7"><a href="r-programming.html#cb132-7" tabindex="-1"></a>}</span>
<span id="cb132-8"><a href="r-programming.html#cb132-8" tabindex="-1"></a></span>
<span id="cb132-9"><a href="r-programming.html#cb132-9" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb132-10"><a href="r-programming.html#cb132-10" tabindex="-1"></a><span class="fu">h</span>()</span>
<span id="cb132-11"><a href="r-programming.html#cb132-11" tabindex="-1"></a><span class="co">#&gt; [1] 11</span></span></code></pre></div>
<p>To evaluate the function <code>h()</code> above, <code>R</code> needs to evaluate the function <code>f()</code>. The function <code>f()</code> simply returns <code>x + 1</code>. But in order to compute <code>x + 1</code>, <code>R</code> needs to find the value associated with the name <code>x</code>. <code>R</code> will start looking in the current environment; the function body of <code>f()</code>:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="r-programming.html#cb133-1" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb133-2"><a href="r-programming.html#cb133-2" tabindex="-1"></a>  x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb133-3"><a href="r-programming.html#cb133-3" tabindex="-1"></a>}</span></code></pre></div>
<p><code>x</code> is not defined in the body of <code>f()</code>, hence <code>R</code> will look for the variable in the parent environment. The parent environment of <code>f()</code> is <code>h()</code> (as <code>f()</code> is defined inside of <code>h()</code>):</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb134-1"><a href="r-programming.html#cb134-1"></a>h <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb134-2"><a href="r-programming.html#cb134-2"></a>  x <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb134-3"><a href="r-programming.html#cb134-3"></a>  f <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb134-4"><a href="r-programming.html#cb134-4"></a>    x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb134-5"><a href="r-programming.html#cb134-5"></a>  }</span>
<span id="cb134-6"><a href="r-programming.html#cb134-6"></a>  <span class="fu">f</span>()</span>
<span id="cb134-7"><a href="r-programming.html#cb134-7"></a>}</span></code></pre></div>
<p><code>x</code> is associated with the value 10 in line 2. Therefore, <code>R</code> takes that value to compute <code>x + 1</code>, and <code>h()</code> returns 11.</p>
<p>The principle that <code>R</code> will look for a name in the parent environment if it is not found in the current environment is what is called <em>lexical scoping</em>.
More precisely: Lexical scoping is the set of rules that determines how <code>R</code> finds the value associated with a name. The <em>lexical</em> in lexical scoping comes from the computer science term <em>lexing</em>, which is the process of breaking down a string into meaningful pieces that the programming language can understand.
In short, <code>R</code>’s lexical scoping follows these four primary rules;</p>
<ul>
<li>Dynamic lookup:</li>
</ul>
<p>In <code>R</code>, dynamic lookup focuses on where to look for values, not when to look for them. In other words, <code>R</code> looks for values when the function is run, not when the function is created. For example, defining the following function won’t throw and error; even if <code>x</code> has not been defined yet:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="r-programming.html#cb135-1" tabindex="-1"></a>fct <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb135-2"><a href="r-programming.html#cb135-2" tabindex="-1"></a>  x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb135-3"><a href="r-programming.html#cb135-3" tabindex="-1"></a>}</span></code></pre></div>
<p>But once we call <code>fct()</code>, <code>R</code> tries to look for <code>x</code> and returns an error, if <code>x</code> does not exist:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="r-programming.html#cb136-1" tabindex="-1"></a><span class="fu">fct</span>()</span>
<span id="cb136-2"><a href="r-programming.html#cb136-2" tabindex="-1"></a><span class="co">#&gt; Error in fct(): object &#39;x&#39; not found</span></span></code></pre></div>
<ul>
<li>A fresh start:</li>
</ul>
<p>Every time a function is called, a new environment is created to host its execution. This means that each invocation is completely independent of all prior invocations:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="r-programming.html#cb137-1" tabindex="-1"></a>fct <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb137-2"><a href="r-programming.html#cb137-2" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">exists</span>(<span class="st">&quot;x&quot;</span>)) x <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="cf">else</span> x <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb137-3"><a href="r-programming.html#cb137-3" tabindex="-1"></a>  x</span>
<span id="cb137-4"><a href="r-programming.html#cb137-4" tabindex="-1"></a>}</span>
<span id="cb137-5"><a href="r-programming.html#cb137-5" tabindex="-1"></a></span>
<span id="cb137-6"><a href="r-programming.html#cb137-6" tabindex="-1"></a><span class="fu">fct</span>()</span>
<span id="cb137-7"><a href="r-programming.html#cb137-7" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb137-8"><a href="r-programming.html#cb137-8" tabindex="-1"></a><span class="fu">fct</span>()</span>
<span id="cb137-9"><a href="r-programming.html#cb137-9" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span></code></pre></div>
<p>You are, however, able to circumvent this using the super assignment <code>&lt;&lt;-</code>. Super assignment never creates a variable in the current environment, but modifies an existing variable found in a parent environment. If the variable is not found in a parent environment, super assignment will create one in the global environment:</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="r-programming.html#cb138-1" tabindex="-1"></a>fct <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb138-2"><a href="r-programming.html#cb138-2" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">exists</span>(<span class="st">&quot;x&quot;</span>)) x <span class="ot">&lt;&lt;-</span> <span class="dv">1</span> <span class="cf">else</span> x <span class="ot">&lt;&lt;-</span> x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb138-3"><a href="r-programming.html#cb138-3" tabindex="-1"></a>  x</span>
<span id="cb138-4"><a href="r-programming.html#cb138-4" tabindex="-1"></a>}</span>
<span id="cb138-5"><a href="r-programming.html#cb138-5" tabindex="-1"></a></span>
<span id="cb138-6"><a href="r-programming.html#cb138-6" tabindex="-1"></a><span class="fu">fct</span>()</span>
<span id="cb138-7"><a href="r-programming.html#cb138-7" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb138-8"><a href="r-programming.html#cb138-8" tabindex="-1"></a><span class="fu">fct</span>()</span>
<span id="cb138-9"><a href="r-programming.html#cb138-9" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb138-10"><a href="r-programming.html#cb138-10" tabindex="-1"></a><span class="fu">fct</span>()</span>
<span id="cb138-11"><a href="r-programming.html#cb138-11" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span></code></pre></div>
<ul>
<li>Functions versus variables:</li>
</ul>
<p>Whenever a function and a non-function in two different environments share the same name, <code>R</code> ignores non-function objects when looking for that value:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="r-programming.html#cb139-1" tabindex="-1"></a>f1 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) x <span class="sc">+</span> <span class="dv">10</span></span>
<span id="cb139-2"><a href="r-programming.html#cb139-2" tabindex="-1"></a></span>
<span id="cb139-3"><a href="r-programming.html#cb139-3" tabindex="-1"></a>f2 <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb139-4"><a href="r-programming.html#cb139-4" tabindex="-1"></a>  f1 <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb139-5"><a href="r-programming.html#cb139-5" tabindex="-1"></a>  <span class="fu">f1</span>(f1)</span>
<span id="cb139-6"><a href="r-programming.html#cb139-6" tabindex="-1"></a>}</span>
<span id="cb139-7"><a href="r-programming.html#cb139-7" tabindex="-1"></a></span>
<span id="cb139-8"><a href="r-programming.html#cb139-8" tabindex="-1"></a><span class="fu">f2</span>()</span>
<span id="cb139-9"><a href="r-programming.html#cb139-9" tabindex="-1"></a><span class="co">#&gt; [1] 40</span></span></code></pre></div>
<ul>
<li>Name masking:</li>
</ul>
<p>Name masking is the basic principle of lexical scoping. It controls that names defined inside a function mask names defined outside that function. Name masking is related closely to the third exception <em>Every environment has a parent environment</em> mentioned in connection to environments in the beginning of this section.</p>
<p>The four rules defining <code>R</code>’s lexical scoping have some implications that may be confusing at first. As mentioned above, the output of a function may depend on the objects defined outside of the function:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="r-programming.html#cb140-1" tabindex="-1"></a>fct <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb140-2"><a href="r-programming.html#cb140-2" tabindex="-1"></a>  x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb140-3"><a href="r-programming.html#cb140-3" tabindex="-1"></a>}</span>
<span id="cb140-4"><a href="r-programming.html#cb140-4" tabindex="-1"></a></span>
<span id="cb140-5"><a href="r-programming.html#cb140-5" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">15</span></span>
<span id="cb140-6"><a href="r-programming.html#cb140-6" tabindex="-1"></a><span class="fu">fct</span>()</span>
<span id="cb140-7"><a href="r-programming.html#cb140-7" tabindex="-1"></a><span class="co">#&gt; [1] 16</span></span>
<span id="cb140-8"><a href="r-programming.html#cb140-8" tabindex="-1"></a></span>
<span id="cb140-9"><a href="r-programming.html#cb140-9" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb140-10"><a href="r-programming.html#cb140-10" tabindex="-1"></a><span class="fu">fct</span>()</span>
<span id="cb140-11"><a href="r-programming.html#cb140-11" tabindex="-1"></a><span class="co">#&gt; [1] 11</span></span></code></pre></div>
<p>Conversely, lexical scoping can also lead to a function being independent of the objects outside of the function:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="r-programming.html#cb141-1" tabindex="-1"></a>fct <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb141-2"><a href="r-programming.html#cb141-2" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb141-3"><a href="r-programming.html#cb141-3" tabindex="-1"></a>  x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb141-4"><a href="r-programming.html#cb141-4" tabindex="-1"></a>}</span>
<span id="cb141-5"><a href="r-programming.html#cb141-5" tabindex="-1"></a></span>
<span id="cb141-6"><a href="r-programming.html#cb141-6" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">15</span></span>
<span id="cb141-7"><a href="r-programming.html#cb141-7" tabindex="-1"></a><span class="fu">fct</span>()</span>
<span id="cb141-8"><a href="r-programming.html#cb141-8" tabindex="-1"></a><span class="co">#&gt; [1] 6</span></span></code></pre></div>
<p>We generally want to avoid this behavior, as it can lead to errors and misunderstandings. Furthermore, lexical scoping may lead to erroneous outputs. For example, if you make a spelling mistake in your code and write <code>y</code> instead of <code>z</code> in the body of the function, the output will not be as expected:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="r-programming.html#cb142-1" tabindex="-1"></a>fct <span class="ot">&lt;-</span> <span class="cf">function</span>(x, z) {</span>
<span id="cb142-2"><a href="r-programming.html#cb142-2" tabindex="-1"></a>  x<span class="sc">^</span>y <span class="co"># instead of x^z</span></span>
<span id="cb142-3"><a href="r-programming.html#cb142-3" tabindex="-1"></a>}</span>
<span id="cb142-4"><a href="r-programming.html#cb142-4" tabindex="-1"></a></span>
<span id="cb142-5"><a href="r-programming.html#cb142-5" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb142-6"><a href="r-programming.html#cb142-6" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb142-7"><a href="r-programming.html#cb142-7" tabindex="-1"></a>z <span class="ot">&lt;-</span> x <span class="sc">+</span> y</span>
<span id="cb142-8"><a href="r-programming.html#cb142-8" tabindex="-1"></a><span class="fu">fct</span>(x, z)</span>
<span id="cb142-9"><a href="r-programming.html#cb142-9" tabindex="-1"></a><span class="co">#&gt; [1] 8</span></span></code></pre></div>
<p>Another potential problem to be aware of is that you can accidentally redefine functions without noticing:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="r-programming.html#cb143-1" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="cf">function</span>(...) <span class="fu">paste0</span>(...)</span>
<span id="cb143-2"><a href="r-programming.html#cb143-2" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb143-3"><a href="r-programming.html#cb143-3" tabindex="-1"></a><span class="co">#&gt; [1] &quot;123&quot;</span></span></code></pre></div>
<p>The function <code>c()</code> defined above will mask the base <code>R</code> function <code>c()</code> combining values into a vector (<code>R</code> will look for the name <code>c</code> in the current environment first). If this happens, you need to tell <code>R</code> to look for the original function in the package that includes that function in order to use it, i.e.:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="r-programming.html#cb144-1" tabindex="-1"></a>base<span class="sc">::</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb144-2"><a href="r-programming.html#cb144-2" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3</span></span></code></pre></div>
<p>Fortunately, you can easily remove the duplicated function from the current environment with <code>rm()</code>, as <code>R</code> will start looking for the name in the current environment. When calling the function <code>c()</code> afterwards, the name <code>c</code> is no longer defined in the current environment, and <code>R</code> will look for the name in the parent environments:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="r-programming.html#cb145-1" tabindex="-1"></a><span class="fu">rm</span>(c)</span>
<span id="cb145-2"><a href="r-programming.html#cb145-2" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb145-3"><a href="r-programming.html#cb145-3" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3</span></span></code></pre></div>
<p>If you are still confused about environments and scoping, we recommend you take a look at these other materials:</p>
<ul>
<li><a href="https://adv-r.hadley.nz/functions.html">Chapter 6 <em>Functions</em></a> of <em>Advanced R</em> by Hadley Wickham.</li>
<li><a href="https://adv-r.hadley.nz/environments.html">Chapter 7 <em>Environments</em></a> of <em>Advanced R</em> by Hadley Wickham.</li>
<li><a href="https://bookdown.org/rdpeng/rprogdatascience/scoping-rules-of-r.html">Chapter 15 <em>Scoping Rules of R</em></a> of <em>R Programming for Data Science</em> by Roger Peng. This chapter also comes with video versions of <a href="https://www.youtube.com/watch?v=ujdm01Vsrmo">Section 15.1</a> and <a href="https://www.youtube.com/watch?v=yYzPhtF6--A">Section 15.3</a>.</li>
</ul>
</div>
<div id="summary-1" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Summary<a href="r-programming.html#summary-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Real numbers are represented as floating-point numbers, which can lead to floating-point errors. Use <code>all.equal()</code> or <code>dplyr::near()</code> instead of <code>==</code> to test if two objects are equal.</li>
<li><code>...</code> is a special argument that allows functions to take any number of arguments. <code>...</code> is greedy and any misspelled or non-existing arguments will be passed on without raising an error.</li>
<li>The function <code>sample()</code> can be used with a vector, a single number, or even a real number. Internally, <code>sample()</code> turns any (real) number <code>x</code> into a sequence starting with 1 and increasing with 1 until the upper limit <code>x</code> is reached.</li>
<li>The colon operator <code>from:to</code> can be used to generate sequences staring from <code>from</code> and ending with <code>to</code> in steps of 1 or -1 (similar to <code>seq()</code>).</li>
<li>All <code>R</code> objects have a type.</li>
<li>The four most common types of a basic (atomic) vector are <code>logical</code>, <code>integer</code>, <code>double</code>, and <code>character</code>.</li>
<li>Atomic vectors are one-dimensional and homogeneous (i.e. all contents must be of the same type).</li>
<li>Generic vectors (or lists) are one-dimensional and heterogeneous (i.e. they can contain different types).</li>
<li>Two-dimensional matrices and multi-dimensional arrays are obtained from atomic vectors by adding the attribute <code>dim</code>.</li>
<li>Data frames are generic vectors whose contents are equal-length vectors.</li>
<li>Per default, data frames have three attributes: <code>names</code>, <code>class</code>, and <code>row.names</code>.</li>
<li><code>R</code> has class-specific functions, called methods.</li>
<li>You can define your own attributes using the function <code>structure()</code>.</li>
<li>Data frames can be subsetted like a one-dimensional structure (where it behaves like a list), or a two-dimensional structure (where it behaves like a matrix).</li>
<li>The <code>[</code> accessor can be used on vectors, matrices, arrays, lists and data frames to extract or replace subsets of the data with the same class.</li>
<li>The <code>[[</code> accessor can be used on vectors, matrices, arrays, lists and data frames to access or replace a single element.</li>
<li>The <code>$</code> accessor can be used on lists and data frames to access or replace single elements.</li>
<li>Environments associate a set of names with a set of values.</li>
<li>If a name is not found in the current environment, <code>R</code> will look for the name in the parent environments.</li>
<li>Lexical scoping is the set of rules that determines how <code>R</code> finds the value associated with a name, and it can be quite confusing…</li>
</ul>
</div>
<div id="useful-resources-2" class="section level2 unnumbered hasAnchor">
<h2>Useful resources<a href="r-programming.html#useful-resources-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><a href="https://medium.com/@kusal95/computer-floating-point-arithmetic-and-round-off-errors-5c879c480982"><em>Computer Floating-Point Arithmetic and round-off errors</em></a>, article by Kausal Kaluarachchi.</li>
<li><a href="https://bookdown.org/rdpeng/rprogdatascience/functions.html">Chapter 14 <em>Functions</em></a> of <em>R Programming for Data Science</em> by Roger Peng.</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="good-practices.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="rmarkdown.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
